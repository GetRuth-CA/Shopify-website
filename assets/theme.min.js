!function(e,t){e="default"in e?e.default:e;const i={TAB:"tab",ENTER:"enter",ESC:"escape",SPACE:" ",END:"end",HOME:"home",LEFT:"arrowleft",UP:"arrowup",RIGHT:"arrowright",DOWN:"arrowdown"};function n(e,t){let i;return(...n)=>{clearTimeout(i),i=setTimeout(()=>e.apply(this,n),t)}}function s(e){const t=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];let i=0,n=Promise.resolve();return["WebkitTransition","MozTransition","OTransition","msTransition","transition"].forEach(()=>{i||(i=parseFloat(window.getComputedStyle(e).transitionDuration))}),i>0&&(n=new Promise(i=>{const n=t.map(t=>(e.addEventListener(t,s),{event:t,handler:s}));function s(t){t.target===e&&(n.forEach(({event:t,handler:i})=>{e.removeEventListener(t,i)}),i())}})),n}function r(){let e=window.navigator.cookieEnabled;return e||(document.cookie="testcookie",e=-1!==document.cookie.indexOf("testcookie")),e}function a(){return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype}function o(e,t="min"){return`(${t}-width: ${{medium:"46.85em",large:"61.85em",widescreen:"87.5em"}[e]})`}const d={stage:"data-popup-stage",popup:"data-popup",open:"data-popup-open",close:"data-popup-close",focus:"data-popup-focus"},l={open:"is-open",transitionReady:"transition-ready",preventScrolling:"prevent-scrolling"};class c{constructor(e){this.name=e}init(){this.elements=this._getElements(),this._bindEvents(),this.keyUpHandler=this._onKeyUp.bind(this),this.scrollPosition=window.pageYOffset}openPopup(e){e.preventDefault&&e.preventDefault(),this._prepareAnimation(),this.elements.stage.classList.add(l.open),this._sleepAnimation(),this.elements.focus?t.trapFocus(this.elements.popup,{elementToFocus:this.elements.focus}):t.trapFocus(this.elements.popup),this.elements.triggerNode=e.currentTarget,this.elements.triggerNode.setAttribute("aria-expanded",!0),this._enableScrollLock(),document.addEventListener("keyup",this.keyUpHandler)}closePopup(e=!0){this._prepareAnimation(),this.elements.stage.classList.remove(l.open),this._sleepAnimation(),e&&(t.removeTrapFocus(),this.elements.triggerNode.focus(),document.removeEventListener("keyup",this.keyUpHandler)),this.elements.triggerNode.setAttribute("aria-expanded",!1),this._disableScrollLock(),this.elements.triggerNode.dispatchEvent(new window.CustomEvent("popup_closed"))}getElements(){return this.elements}resetContainerFocus(){t.removeTrapFocus(),this.elements.focus?t.trapFocus(this.elements.popup,{elementToFocus:this.elements.focus}):t.trapFocus(this.elements.popup)}_prepareAnimation(){this.elements.stage.classList.add(l.transitionReady)}_sleepAnimation(){return s(this.elements.popup).then(()=>{this.elements.stage.classList.remove(l.transitionReady)})}_getElements(){return{stage:document.querySelector(`[${d.stage}=${this.name}]`),popup:document.querySelector(`[${d.popup}=${this.name}]`),open:document.querySelectorAll(`[${d.open}=${this.name}]`),close:document.querySelectorAll(`[${d.close}=${this.name}]`),focus:document.querySelector(`[${d.focus}=${this.name}]`)}}_bindEvents(){this.elements.open.forEach(e=>{e.addEventListener("click",e=>this.openPopup(e))}),this.elements.close.forEach(e=>{e.addEventListener("click",()=>this.closePopup())})}_enableScrollLock(){this.scrollPosition=window.pageYOffset,document.body.style.top=`-${this.scrollPosition}px`,document.body.classList.add(l.preventScrolling)}_disableScrollLock(){document.body.classList.remove(l.preventScrolling),document.body.style.removeProperty("top"),window.scrollTo(0,this.scrollPosition)}_onKeyUp(e){e.key.toLowerCase()===i.ESC&&this.closePopup()}}function u(){return JSON.parse(JSON.stringify({credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json;"}}))}function h(e,t){return fetch(e,t).then(function(e){if(!e.ok)throw e;return e.json()})}function p(){return h("/cart.js",u())}function m(e){var t=u();return t.method="POST",t.body=JSON.stringify(e),h("/cart/update.js",t)}function g(e){if("string"!=typeof e||2!==e.split(":").length)throw new TypeError("Theme Cart: Provided key value is not a string with the format xxx:xxx")}function y(e){if("object"!=typeof e)throw new TypeError("Theme Cart: Options must be an object");if(void 0===e.quantity&&void 0===e.properties)throw new Error("Theme Cart: You muse define a value for quantity or properties");void 0!==e.quantity&&function(e){if("number"!=typeof e||isNaN(e))throw new TypeError("Theme Cart: An object which specifies a quantity or properties value is required")}(e.quantity),void 0!==e.properties&&function(e){if("object"!=typeof e)throw new TypeError("Theme Cart: Properties must be an object")}(e.properties)}function v(){return p()}function w(e){!function(e){if(!(e instanceof HTMLFormElement))throw new TypeError("Theme Cart: Form must be an instance of HTMLFormElement")}(e);var t=new FormData(e);return function(e){if("number"!=typeof e||isNaN(e))throw new TypeError("Theme Cart: Variant ID must be a number")}(parseInt(t.get("id"),10)),function(e){var t=u();return delete t.headers["Content-Type"],t.method="POST",t.body=e,h("/cart/add.js",t)}(t)}function b(e,t){return g(e),y(t),function(e){return g(e),p().then(function(t){var i=-1;return t.items.forEach(function(t,n){i=t.key===e?n+1:i}),-1===i?Promise.reject(new Error("Theme Cart: Unable to match line item with provided key")):i})}(e).then(function(e){return function(e,t){var i=u();return t=t||{},i.method="POST",i.body=JSON.stringify({line:e,quantity:t.quantity,properties:t.properties}),h("/cart/change.js",i)}(e,t)})}var f,_=(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatMoney=function(e,t){"string"==typeof e&&(e=e.replace(".",""));var n="",s=/\{\{\s*(\w+)\s*\}\}/,r=t||i;function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:",",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".";if(isNaN(e)||null==e)return 0;var s=(e=(e/100).toFixed(t)).split("."),r=s[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+i),a=s[1]?n+s[1]:"";return r+a}switch(r.match(s)[1]){case"amount":n=a(e,2);break;case"amount_no_decimals":n=a(e,0);break;case"amount_with_comma_separator":n=a(e,2,".",",");break;case"amount_no_decimals_with_comma_separator":n=a(e,0,".",",")}return r.replace(s,n)};var i="${{amount}}"}(f={exports:{}},f.exports),f.exports).formatMoney;const C={cartItemsWrapper:"[data-cart-items]",cartItem:"data-cart-item",quantityInput:"[data-cart-item-quantity]",remove:"[data-remove]",cartCountBubble:"[data-cart-count-bubble]",cartCount:"[data-cart-count]",cartNote:"[data-cart-note]",cartPrice:"[data-cart-price]",priceLiveRegion:"[data-price-live-region]",checkoutButton:"[data-checkout-button]",cartItemError:"[data-cart-item-error]",closeButton:"[data-cart-close]",emptyText:"[data-cart-empty-text]",discounts:"[data-discounts]"},E={hidden:"hidden",isEmpty:"is-empty",cookiesDisabled:"cookies-disabled",hasError:"has-error"};class S{constructor(e){this.elements={cart:e}}init(){r()?(Object.assign(this.elements,this.getCartElements(),this.getItemElements()),this.bindContextOfThis(),this.debouncedOnCartItemInput=n((e,t)=>{this.onCartItemInput(e,t)},300),this.addCartEvents(),this.addItemEvents()):this.elements.cart.classList.add(E.cookiesDisabled)}bindContextOfThis(){this.onCartItemInput=this.onCartItemInput.bind(this),this.onCartItemClick=this.onCartItemClick.bind(this),this.updateCartNote=this.updateCartNote.bind(this)}getItemElements(){return{cartItems:this.elements.cart.querySelectorAll(`[${C.cartItem}]`)}}getCartElements(){return{cartNote:this.elements.cart.querySelector(C.cartNote)}}addItemEvents(){this.elements.cartItems.forEach(e=>{e.addEventListener("change",e=>{this.debouncedOnCartItemInput(e,e.currentTarget)}),e.addEventListener("click",this.onCartItemClick)})}addCartEvents(){this.elements.cartNote&&this.elements.cartNote.addEventListener("input",this.updateCartNote)}onCartItemInput(e,t){e.preventDefault();const i=t.querySelector(C.quantityInput);return e.target===i&&this.updateQuantity(e,t)}onCartItemClick(e){const t=e.currentTarget.querySelector(C.remove);e.target===t&&(e.preventDefault(),e.target.disabled=!0,this.removeItem(e))}updateQuantity(e,t){const i=t.dataset.cartItem,n=t.dataset.cartItemProductId,[s]=i.split(":"),r=e.target.value||1,a=parseInt(r,10);return this.removeLineItemError(t),b(i,{quantity:a}).then(e=>(this.renderCart(e,n),theme.cartQuantity.updateQuantityInputElements(i,a),e.item_count?this.renderCartItems(e):(this.renderEmptyCart(),!1))).then(e=>{if(!e)return;const t=e.items.find(e=>e.key===i),n=e.items.reduce((e,t)=>t.id===Number(s)?e+t.quantity:e,0),r=this.elements.cart.querySelector(`[${C.cartItem}="${i}"]`);if(r&&r.querySelector(C.quantityInput).focus(),a<=n)return;const o=r.querySelector(C.cartItemError);this.updateLineItemError(o,t)})}updateCartNote(){const e=this.elements.cartNote.value;e?function(e){m({note:e})}(e):m({note:""})}removeItem(e){const t=e.currentTarget,i=t.dataset.cartItem,n=t.dataset.cartItemProductId;return b(i,{quantity:0}).then(e=>{this.renderCart(e,n),theme.cartQuantity.updateQuantityInputElements(i,0),e.item_count?(this.renderCartItems(),this.elements.closeButton=this.elements.closeButton||this.elements.cart.querySelector(C.closeButton),this.elements.closeButton.focus()):this.renderEmptyCart()})}updateLineItemError(e,t){let i=theme.strings.quantityError;i=i.replace("[quantity]",t.quantity).replace("[title]",t.title),e.innerHTML=i,e.classList.add(E.hasError)}removeLineItemError(e){const t=e.querySelector(C.cartItemError);t.classList.remove(E.hasError),t.textContent=""}changeCheckoutButtonState(e){this.elements.checkoutButton=this.elements.checkoutButton||this.elements.cart.querySelector(C.checkoutButton),this.elements.checkoutButton.disabled=e}onCartUpdated(e){return this.renderCartItems(),v().then(t=>{this.renderCart(t,e)})}renderCartItems(e){return fetch(`${theme.rootUrl}?section_id=cart-items`).then(e=>e.text()).then(t=>(this.elements.cartItemsWrapper=this.elements.cartItemsWrapper||this.elements.cart.querySelector(C.cartItemsWrapper),this.elements.cartItemsWrapper.innerHTML=t,Object.assign(this.elements,this.getItemElements()),this.addItemEvents(),e))}renderCart(e,t){this.renderSubtotalPrice(e.total_price),this.renderCartCountBubble(e.item_count),this.renderPriceLiveRegion(e),this.renderCartLevelDiscounts(),theme.cartQuantity.updateLocalCartState(e,t),e.item_count&&(this.elements.cart.classList.remove(E.isEmpty),this.changeCheckoutButtonState(!1))}renderEmptyCart(){this.elements.cart.classList.add(E.isEmpty),this.changeCheckoutButtonState(!0),this.elements.cartEmptyText=this.elements.cartEmptyText||this.elements.cart.querySelector(C.emptyText),this.elements.cartEmptyText.setAttribute("tabindex","-1"),this.elements.cartEmptyText.focus()}renderCartLevelDiscounts(){return fetch(`${theme.rootUrl}?section_id=cart-discounts`).then(e=>e.text()).then(e=>{this.elements.discounts=this.elements.discounts||this.elements.cart.querySelector(C.discounts),this.elements.discounts.innerHTML=e})}renderSubtotalPrice(e){const t=_(e,theme.moneyFormat);this.elements.cartPrice=this.elements.cartPrice||document.body.querySelectorAll(C.cartPrice),this.elements.cartPrice.forEach(e=>{e.innerHTML=t})}renderCartCountBubble(e){const t=document.querySelectorAll(C.cartCountBubble);document.querySelectorAll(C.cartCount).forEach(t=>t.innerText=e>99?"99+":e),t.forEach(t=>t.classList.toggle(E.hidden,0===e))}renderPriceLiveRegion(e){const t=e.total_price;this.elements.priceLiveRegion=this.elements.priceLiveRegion||this.elements.cart.querySelector(C.priceLiveRegion);const i=this.formatPriceLiveRegionText(t);this.elements.priceLiveRegion.textContent=i,this.elements.priceLiveRegion.setAttribute("aria-hidden",!1),window.setTimeout(()=>{this.elements.priceLiveRegion.setAttribute("aria-hidden",!0)},1e3)}formatPriceLiveRegionText(e){const t=_(e,theme.moneyFormat);return`${theme.strings.subtotal}: ${t}`}getItemFromState(e,t){return t.items.find(t=>t.key===e)}}const L={quantityIndicatorId:e=>`[data-quantity-indicator="${e}"]`,quantityInputKey:e=>`[data-quantity-input-key="${e}"]`,quantityNumber:"[data-quantity-number]",quantityLabel:"[data-quantity-label]"},T={inCart:"in-cart",isVisible:"is-visible",updated:"updated"};class I{constructor(){this.cartState={}}updateLocalCartState(e,t){e?(this.cartState=this._convertToLocalCartState(e),this.updateQuantityIndicatorElements([t])):v().then(e=>{this.cartState=this._convertToLocalCartState(e),this.updateQuantityIndicatorElements()})}updateQuantityInputElements(e,t){document.querySelectorAll(L.quantityInputKey(e)).forEach(e=>{e.dataset.quantityInCart=t,e.value=t,t||e.dispatchEvent(new window.CustomEvent("removedFromCart"))})}updateQuantityIndicatorElements(e,t=document,i){(e||Object.keys(this.cartState)).forEach(e=>{const n=this.cartState[e];!n&&i||t.querySelectorAll(L.quantityIndicatorId(e)).forEach(e=>{this._setQuantityIndicator(e,n)})})}_convertToLocalCartState(e){const t={};return e.items.forEach(e=>{t[e.product_id]||(t[e.product_id]=0),t[e.product_id]+=e.quantity}),t}_setQuantityIndicator(e,t){const i=e.querySelector(L.quantityNumber),n=t||0;if(parseInt(i.dataset.quantity,10)===n)return;e.classList.contains(T.isVisible)&&t?this._animateUpdate(e):this._animateShowOrHide(e,n),i.dataset.quantity=n;const s=n<100?n:"99+";i.textContent=s;const r=1===t?e.dataset.labelSingle:e.dataset.labelMulti.replace("[quantity]",n);e.querySelector(L.quantityLabel).textContent=r}_animateShowOrHide(e,t){e.classList.toggle(T.inCart,t),t?e.classList.add(T.isVisible):s(e).then(()=>{e.classList.remove(T.isVisible)})}_animateUpdate(e){e.classList.add(T.updated),s(e).then(()=>{e.classList.remove(T.updated)})}}const k={form:"[data-form]",formInputWrapper:"[data-form-input-wrapper]",formStatus:"[data-form-status]"},M={floatingLabel:"form__input-wrapper--floating-label"};class A{constructor(){document.querySelectorAll(k.form).forEach(e=>{this._focusFormStatus(e),this._handleFormInputLabels(e)})}_focusFormStatus(e){const t=e.querySelector(k.formStatus);t&&(t.focus(),t.addEventListener("blur",()=>{t.removeAttribute("tabindex")}))}_handleFormInputLabels(e){const t=e.querySelectorAll(k.formInputWrapper);t&&t.forEach(e=>{e.addEventListener("focusin",()=>{e.classList.add(M.floatingLabel)}),e.addEventListener("focusout",t=>{""===t.target.value&&e.classList.remove(M.floatingLabel)})})}}const P={cookiesDisabled:"cookies-disabled"};class q{constructor(e){this.elements={cart:e}}init(){r()||this.elements.cart.classList.add(P.cookiesDisabled)}}const H={arrow:"[data-scroller-arrow]",menu:"[data-scroller-content]",wrapper:"[data-scroller-wrapper]"},x={noTransition:"scroller-content--no-transition",wrapper:"scroller-wrapper"},N={offset:150};class O{constructor(e){this.container=e}init(){this.wrapper=this.container.querySelector(H.wrapper),this.wrapper&&(this.initialized=!0,this.menu=this.wrapper.querySelector(H.menu),this.arrows=this.container.querySelectorAll(H.arrow),this.isTransitioning=!1,this._setupEventHandlers(),function(e){const t=e||theme.stylesheet;return void 0===this.stylesheetPromise&&(this.stylesheetPromise=new Promise(e=>{const i=document.querySelector(`link[href="${t}"]`);i.loaded&&e(),window.onloadCSS(i,function(){e()})})),this.stylesheetPromise}().then(()=>{this._recalculateOverflow()}))}makeElementVisible(e){if("none"===this.overflowValue||!this.initialized)return;let t=!0;const i=N.offset/2,n=e.getBoundingClientRect(),s=Math.floor(n.left)-i,r=Math.floor(n.right)+i;if(this.wrapperRect||this._recalculateOverflow(),r>this.wrapperRect.right?(this.direction="next",t=!1):s<this.wrapperRect.left&&(this.direction="previous",t=!1),t||this.isTransitioning)return;this.isTransitioning=!0;const a=this._getDistanceToElement(r,e.offsetLeft,i);this._setMenuTranslateX(a)}destroy(){this.initialized&&(this.wrapper.removeEventListener("scroll",this.eventHandlers.recalculateOverflow,{passive:!0}),window.removeEventListener("resize",this.eventHandlers.debounceScroller),this.arrows.forEach(e=>{e.removeEventListener("click",this.eventHandlers.onArrowClick)}))}_recalculateOverflow(){const e=this._getOverflowValue();this._setOverflowClass(e)}_setupEventHandlers(){this.eventHandlers=this._getEventHandlers(),this.wrapper.addEventListener("scroll",this.eventHandlers.recalculateOverflow,{passive:!0}),window.addEventListener("resize",this.eventHandlers.debounceScroller),this.arrows.forEach(e=>{e.addEventListener("click",this.eventHandlers.onArrowClick)})}_getEventHandlers(){return{recalculateOverflow:this._recalculateOverflow.bind(this),onArrowClick:this._onArrowClick.bind(this),debounceScroller:n(()=>{this._recalculateOverflow()},250)}}_getOverflowValue(){this._getSelectorsDomRect();const e=Math.floor(this.wrapperRect.left),t=Math.floor(this.wrapperRect.right),i=Math.floor(this.menuRect.left)<e,n=Math.floor(this.menuRect.right)>t;let s="none";return i&&n?s="both":i?s="left":n&&(s="right"),s}_getSelectorsDomRect(){this.wrapperRect=this.wrapper.getBoundingClientRect(),this.menuRect=this.menu.getBoundingClientRect()}_setOverflowClass(e){this.overflowValue!==e&&(this.wrapper.classList.remove(`${x.wrapper}--${this.overflowValue}`),window.requestAnimationFrame(()=>{this.wrapper.classList.add(`${x.wrapper}--${e}`),this.overflowValue=e}))}_onArrowClick(e){if(this.isTransitioning)return;this.isTransitioning=!0,this.direction=e.currentTarget.dataset.scrollerArrowDirection;const t=N.offset;let i=this._getDistanceToNextPosition();i=i<2*t?i:t,this._setMenuTranslateX(i)}_getDistanceToNextPosition(){return"next"===this.direction?Math.round(this.menuRect.right-this.wrapperRect.right):this.wrapper.scrollLeft}_getDistanceToElement(e,t,i){if("next"===this.direction){const t=Math.ceil(this.menuRect.width-this.wrapperRect.width-this.wrapper.scrollLeft);let n=Math.round(e-this.wrapperRect.right)+i;return n=n<t?n:t}let n=this.wrapper.scrollLeft-t+i;return n=n<this.wrapper.scrollLeft?n:this.wrapper.scrollLeft}_setMenuTranslateX(e){const t="next"===this.direction?-e:e;this.menu.style.transform=`translateX(${t}px)`,this.translatedValue=t,this.menu.classList.remove(x.noTransition),s(this.menu).then(()=>{this._setWrapperScrollLeft(),this.isTransitioning=!1})}_setWrapperScrollLeft(){const e=Math.abs(this.translatedValue);this.menu.style.transform="none",this.menu.classList.add(x.noTransition),"previous"===this.direction?this.wrapper.scrollLeft-=e:this.wrapper.scrollLeft+=e}}const D={disclosure:"[data-disclosure]",disclosureList:"[data-disclosure-list]",disclosureToggle:"[data-disclosure-toggle]",disclosureInput:"[data-disclosure-input]",disclosureOptions:"[data-disclosure-option]"},F={listVisible:"disclosure-list--visible"};class B{constructor(e){this.disclosureForm=e,this.disclosure=e.querySelector(D.disclosure),this.disclosureList=e.querySelector(D.disclosureList),this.disclosureToggle=e.querySelector(D.disclosureToggle),this.disclosureInput=e.querySelector(D.disclosureInput),this.disclosureOptions=e.querySelectorAll(D.disclosureOptions),this._setupListeners()}destroy(){this.disclosureToggle.removeEventListener("click",this.eventHandlers.toggleList),this.disclosureOptions.forEach(e=>e.removeEventListener("click",this.eventHandlers.connectOptions)),this.disclosure.removeEventListener("keyup",this.eventHandlers.onDisclosureKeyUp),this.disclosureList.removeEventListener("focusout",this.eventHandlers.onDisclosureListFocusOut),this.disclosureToggle.removeEventListener("focusout",this.eventHandlers.onDisclosureToggleFocusOut),document.body.removeEventListener("click",this.eventHandlers.onBodyClick)}_setupListeners(){this.eventHandlers=this._setupEventHandlers(),this.disclosureToggle.addEventListener("click",this.eventHandlers.toggleList),this.disclosureOptions.forEach(e=>{e.addEventListener("click",this.eventHandlers.connectOptions)}),this.disclosure.addEventListener("keyup",this.eventHandlers.onDisclosureKeyUp),this.disclosureList.addEventListener("focusout",this.eventHandlers.onDisclosureListFocusOut),this.disclosureToggle.addEventListener("focusout",this.eventHandlers.onDisclosureToggleFocusOut),document.body.addEventListener("click",this.eventHandlers.onBodyClick)}_setupEventHandlers(){return{connectOptions:this._connectOptions.bind(this),toggleList:this._toggleList.bind(this),onBodyClick:this._onBodyClick.bind(this),onDisclosureKeyUp:this._onDisclosureKeyUp.bind(this),onDisclosureListFocusOut:this._onDisclosureListFocusOut.bind(this),onDisclosureToggleFocusOut:this._onDisclosureToggleFocusOut.bind(this)}}_connectOptions(e){e.preventDefault(),this._submitForm(e.currentTarget.dataset.value)}_onDisclosureToggleFocusOut(e){!1===this.disclosure.contains(e.relatedTarget)&&this._toggleList()}_onDisclosureListFocusOut(e){const t=e.currentTarget.contains(e.relatedTarget);this.disclosureList.classList.contains(F.listVisible)&&!t&&this._toggleList()}_onDisclosureKeyUp(e){e.key.toLowerCase()===i.ESC&&(this._toggleList(),this.disclosureToggle.focus())}_onBodyClick(e){const t=this.disclosure.contains(e.target);this.disclosureList.classList.contains(F.listVisible)&&!t&&this._toggleList()}_submitForm(e){this.disclosureInput.value=e,this.disclosureForm.submit()}_toggleList(){const e="true"===this.disclosureToggle.getAttribute("aria-expanded");this.disclosureList.classList.toggle(F.listVisible),this.disclosureToggle.setAttribute("aria-expanded",!e)}}const R="[data-disclosure-form]";e.register("footer",{onLoad(){const e=Array.from(this.container.querySelectorAll(R));this.disclosures=e.map(e=>new B(e))},onUnload(){this.disclosures.forEach(e=>e.destroy())}});const W={dropdownMenu:"[data-dropdown-menu]",dropdownParent:"[data-dropdown-parent]",dropdownParentType:e=>`[data-dropdown-parent-type="${e}"]`,headerIcon:"[data-header-icon]",menuNavigation:"[data-menu-navigation]",menuNavigationItem:"[data-menu-navigation-item]",menuNavigationLastItem:"[data-menu-navigation-last-item]",menuNavigationType:e=>`[data-menu-navigation-type="${e}"]`,mobileNavigationToggle:"[data-mobile-navigation-toggle]",mobileNavigationContainer:"[data-mobile-navigation-container]",mobileNavigationDrawer:"[data-mobile-navigation-drawer]",header:"[data-header]",stickySentinelHeader:"[data-sticky-sentinel-header]",stickyCollectionHeader:"[data-sticky-element]",logoImage:"[data-logo-image]",announcementBar:"[data-announcement-bar]",mainContent:"[data-main-content]"},Q="menu-navigation__item--is-expanded",$="menu-dropdown__item--is-expanded",U="menu-navigation-wrapper--hidden",j="header-wrapper--fixed",V="header-wrapper--hidden",G="body-with-sticky-header",K="data-header-logo",z="data-header-icon",J="data-popup-open",Y="data-mobile-navigation-toggle",X="data-search-toggle",Z={cart:"cart",menuNavigation:"menu-navigation",search:"search"};e.register("header",{onLoad(){this.elements=this._getElements(),a()&&this._prepareStickyHeader(),this._reloadHeaderPopups(),this.mqlLarge=window.matchMedia(o("large")),this.mqlSmall=window.matchMedia(o("medium","max")),this.drawerMenuIsActive=!this.mqlLarge.matches,this.elements.menuNavigation&&this._handleMenuNavigationWidth(),this._setupEventHandlers()},_reloadHeaderPopups(){window.popups&&(!window.popups.find(e=>e.name===Z.menuNavigation)&&this.elements.menuNavigation&&window.popups.push(new c(Z.menuNavigation)),Object.values(Z).forEach(e=>{const t=window.popups.find(t=>t.name===e);t&&t.init()}))},_getElements(){return{announcementBar:this.container.querySelector(W.announcementBar),cartPriceBubbleContainers:this.container.querySelectorAll(W.cartPriceBubbleContainer),desktopNavigation:this.container.querySelector(W.menuNavigationType("desktop")),dropdownParents:this.container.querySelectorAll(W.dropdownParent),header:this.container.querySelector(W.header),headerIcons:Array.from(this.container.querySelectorAll(W.headerIcon)),headerLogo:this.container.querySelector(W.logoImage),headerSentinel:document.querySelector(W.stickySentinelHeader),headerWrapper:this.container,menuNavigation:this.container.querySelector(W.menuNavigation),menuNavigationItems:this.container.querySelectorAll(W.menuNavigationItem),mobileNavigationToggle:this.container.querySelector(W.mobileNavigationToggle)}},_setupEventHandlers(){this.eventHandlers=this._getEventHandlers(),a()&&(window.addEventListener("scroll",this.eventHandlers.toggleHeaderSticky,{passive:!0}),document.addEventListener("productAddedToCart",this.eventHandlers.productAddedToCart),document.addEventListener("featuredCollectionTabClicked",this.eventHandlers.preventHeaderSlideIn),document.addEventListener("elementSticky",this.eventHandlers.featuredCollectionSticky)),this.elements.menuNavigation&&(this.elements.dropdownParents.forEach(e=>e.addEventListener("click",this.eventHandlers.onDropdownParentClick)),window.addEventListener("resize",this.eventHandlers.onWindowResize),this.elements.mobileNavigationToggle.addEventListener("click",this.eventHandlers.handleMobileNavigation))},_getEventHandlers(){return{handleMultiplePopups:this._handleMultiplePopups.bind(this),onBodyClick:this._onBodyClick.bind(this),onDrawerNavigationKeyup:this._onDrawerNavigationKeyup.bind(this),onDropdownFocusOut:this._onDropdownFocusOut.bind(this),onDropdownKeyup:this._onDropdownKeyup.bind(this),onDropdownParentClick:this._onDropdownParentClick.bind(this),onWindowResize:n(()=>this._onWindowResize(),250),handleMobileNavigation:this._handleMobileNavigation.bind(this),toggleHeaderSticky:n(()=>this._toggleHeaderPosition(),100),featuredCollectionSticky:this._featuredCollectionSticky.bind(this),productAddedToCart:this._productAddedToCart.bind(this),preventHeaderSlideIn:this._preventHeaderSlideIn.bind(this)}},_onWindowResize(){const e=this._getDesktopActiveParentDropdown(),t="true"===this.elements.mobileNavigationToggle.getAttribute("aria-expanded");this.scrolledPastHeader||(this._handleMenuNavigationWidth(),this.drawerMenuIsActive&&e?this._closeActiveDropdown():!this.drawerMenuIsActive&&e?this.elements.menuNavigation.style.overflow="initial":t&&!this.drawerMenuIsActive?this._closeMobileNavigation():t&&this.drawerMenuIsActive&&this._toggleHeaderIcons(!0))},_handleMenuNavigationWidth(){if(!this.mqlLarge.matches)return void(this.drawerMenuIsActive=!0);this.elements.menuNavigation.style.overflow="hidden",this.elements.menuNavigation.getBoundingClientRect().right>=this.elements.menuNavigation.querySelector(W.menuNavigationLastItem).getBoundingClientRect().right?(this.elements.menuNavigation.classList.remove(U),this.drawerMenuIsActive=!1):(this.elements.menuNavigation.classList.add(U),this.drawerMenuIsActive=!0)},_onDropdownFocusOut(e){if(e.preventDefault(),e.currentTarget.contains(e.relatedTarget))return;const t=e.currentTarget.previousElementSibling;this._toggleMenuDropdown(t)},_closeActiveDropdown(){const e=this._getDesktopActiveParentDropdown();e&&this._animateDropdownClosed(e.nextElementSibling,e,!1)},_getDesktopActiveParentDropdown(){return this.elements.desktopNavigation.querySelector(`${W.dropdownParent}${W.dropdownParentType("main")}[aria-expanded="true"]`)},_onDropdownParentClick(e){const t=e.currentTarget;"main"===t.dataset.dropdownParentType&&t.closest(W.menuNavigationType("desktop"))&&(e.stopImmediatePropagation(),this._onBodyClick());const i=t.parentElement.querySelectorAll(W.dropdownMenu);this._setupDropdowns(i),this._toggleMenuDropdown(t)},_setupDropdowns(e){e.forEach((e,t)=>{e.dataset.maxHeight||(0===t&&e.closest(W.menuNavigationType("desktop"))?this._setupMainLevelDropdown(e):this._setupChildAndMobileDropdown(e))})},_setupMainLevelDropdown(e){e.style.whiteSpace="nowrap";const{width:t,height:i}=e.getBoundingClientRect();e.dataset.width=`${t}px`,e.style.width=t<260?`${t}px`:"26rem",e.style.removeProperty("white-space"),e.dataset.maxHeight=t<260?`${i}px`:`${e.getBoundingClientRect().height}px`,e.style.maxHeight="0px"},_setupChildAndMobileDropdown(e){e.dataset.maxHeight=`${e.getBoundingClientRect().height}px`,e.style.maxHeight="0px"},_toggleMenuDropdown(e){const t="true"===e.getAttribute("aria-expanded"),i=e.nextElementSibling;t?this._animateDropdownClosed(i,e):this._animateDropdownOpen(i,e)},_animateDropdownClosed(e,t,i=!0){const n="main"===t.dataset.dropdownParentType;n?(t.classList.remove(Q),e.closest(W.menuNavigationType("desktop"))&&e.removeEventListener("focusout",this.eventHandlers.onDropdownFocusOut)):t.classList.remove($),e.style.maxHeight="0px",e.style.opacity=0,i?s(e).then(()=>{this._closeDropdown(t,e,n)}):this._closeDropdown(t,e,n)},_closeDropdown(e,t,i){e.setAttribute("aria-expanded","false"),i&&t.closest(W.menuNavigationType("desktop"))&&(this._getDesktopActiveParentDropdown()||(this.elements.menuNavigation.style.overflow="hidden"),document.body.removeEventListener("click",this.eventHandlers.onBodyClick),t.removeEventListener("click",this._preventDropdownClick),e.parentNode.removeEventListener("keyup",this.eventHandlers.onDropdownKeyup))},_animateDropdownOpen(e,t){const i="main"===t.dataset.dropdownParentType,n=t.closest(W.menuNavigationType("desktop"));i?(n&&(this.elements.menuNavigation.style.overflow="initial"),t.classList.add(Q),n&&e.addEventListener("focusout",this.eventHandlers.onDropdownFocusOut)):t.classList.add($),t.setAttribute("aria-expanded","true"),e.style.maxHeight=`${e.dataset.maxHeight}`,e.style.opacity=1,n&&i&&s(e).then(()=>{document.body.addEventListener("click",this.eventHandlers.onBodyClick),e.addEventListener("click",this._preventDropdownClick),t.parentNode.addEventListener("keyup",this.eventHandlers.onDropdownKeyup)})},_onDropdownKeyup(e){if(e.key.toLowerCase()!==i.ESC)return;const t=e.currentTarget.querySelector(W.dropdownParentType("main")),n=t.nextElementSibling;this._animateDropdownClosed(n,t),t.focus()},_preventDropdownClick(e){e.stopImmediatePropagation()},_onBodyClick(){const e=this._getDesktopActiveParentDropdown();if(!e)return;const t=e.nextElementSibling;this._animateDropdownClosed(t,e)},_handleMobileNavigation(e){const t=e.currentTarget;"true"===t.getAttribute("aria-expanded")?this._closeMobileNavigation():(this._openMobileNavigation(t),this.stickyHeaderTimeout&&clearTimeout(this.stickyHeaderTimeout),this.lastScrollDirection="none")},_closeMobileNavigation(){this._toggleHeaderIcons(),this.elements.headerButtons.length&&this.elements.headerButtons.forEach(e=>e.removeEventListener("click",this.eventHandlers.handleMultiplePopups)),document.removeEventListener("keyup",this.eventHandlers.onDrawerNavigationKeyup),document.removeEventListener("focusin",this._onBodyFocusIn),this.elements.drawerNavigationPopup.closePopup(!1)},_openMobileNavigation(e){this.elements.drawerNavigationPopup=this.elements.drawerNavigationPopup||window.popups.find(e=>e.name===Z.menuNavigation),this.elements.headerButtons=this.elements.headerButtons||this.elements.headerIcons.filter(e=>e.hasAttribute(J)),this._setupMobileNavigationDropdowns(),this._setMobileDrawerHeight(),this._toggleHeaderIcons(!0),this.elements.headerButtons.length&&this.elements.headerButtons.forEach(e=>e.addEventListener("click",this.eventHandlers.handleMultiplePopups)),document.addEventListener("keyup",this.eventHandlers.onDrawerNavigationKeyup),document.addEventListener("focusin",this._onBodyFocusIn),this.elements.drawerNavigationPopup.openPopup({currentTarget:e})},_onBodyFocusIn(e){const t=e.target;(t.hasAttribute(z)||t.hasAttribute(Y)||t.hasAttribute(K))&&e.stopImmediatePropagation()},_setupMobileNavigationDropdowns(){this.elements.mobileNavigation||(this.elements.mobileNavigation=this.elements.headerWrapper.querySelector(W.menuNavigationType("mobile")),this.elements.mobileMenuParents=this.elements.mobileNavigation.querySelectorAll(W.dropdownParent),this.elements.mobileMenuParents.forEach(e=>this._setupDropdowns(e.parentElement.querySelectorAll(W.dropdownMenu))))},_setMobileDrawerHeight(){this.elements.mobileNavigationContainer=this.elements.mobileNavigationContainer||this.elements.headerWrapper.querySelector(W.mobileNavigationContainer),this.elements.mobileNavigationDrawer=this.elements.mobileNavigationDrawer||this.elements.headerWrapper.querySelector(W.mobileNavigationDrawer);const e=this.elements.headerWrapper.getBoundingClientRect().height,t=e-window.pageYOffset;this.elements.mobileNavigationDrawer.style.top=`${e}px`,this.elements.mobileNavigationContainer.style.height=`calc(100vh - ${t}px)`},_toggleHeaderIcons(e=!1){const t=this.mqlSmall.matches&&e;this.elements.headerIcons.forEach(e=>{t?e.setAttribute("hidden",!0):e.removeAttribute("hidden")})},_handleMultiplePopups(e){this.elements.popups=this.elements.popups||{};const t=e.currentTarget.hasAttribute(X)?Z.search:Z.cart;this.elements.popups[t]=this.elements.popups[t]||window.popups.find(e=>e.name===t);const i=this.elements.popups[t].getElements();t===Z.search?this._closeMobileNavigation():s(i.popup).then(()=>{this._closeMobileNavigation()})},_onDrawerNavigationKeyup(e){e.key.toLowerCase()===i.ESC&&(this._toggleHeaderIcons(),document.removeEventListener("keyup",this.eventHandlers.onDrawerNavigationKeyup))},_prepareStickyHeader(){this.featuredCollections={},this.previousScrollPosition=window.pageYOffset,this.headerWrapperHeight=this.elements.headerWrapper.offsetHeight,this.originalHeaderHeight=this.elements.header.offsetHeight,this._setupHeaderObserver(),this.headerObserver.observe(this.elements.headerSentinel),this.elements.headerWrapper.style.position="fixed",document.querySelector(W.mainContent).style.paddingTop=`${this.headerWrapperHeight}px`},_setupHeaderObserver(){this.headerObserver=new IntersectionObserver(e=>{if(e[0].isIntersecting){if(this._resetSentinel(),this.scrolledPastHeader=!1,this._toggleInlineMenuOpacity(),void 0===this.isFixed)return;requestAnimationFrame(()=>{this._resetHeader()})}else this.scrolledPastHeader=!0,this.isFixed=!1,this._headerSlideOut(),s(this.elements.headerWrapper).then(()=>{this._toggleInlineMenuOpacity(),this.drawerMenuIsActive=!0}),this.elements.headerWrapper.classList.add(V),this._moveSentinel()})},_toggleHeaderPosition(){if(this.isHeaderAnimating||this.doNotSlideHeaderIn)return;const e=window.pageYOffset,t=e<this.previousScrollPosition?"up":"down";if(this.previousScrollPosition=e,this.scrolledPastHeader&&this.lastScrollDirection!==t)if(this.lastScrollDirection=t,"down"===t)this.elements.menuNavigation&&this._closeActiveDropdown(),this.isFixed?requestAnimationFrame(()=>{this._headerSlideOut()}):(this.elements.headerLogo&&this.elements.headerLogo.style.removeProperty("transition"),requestAnimationFrame(()=>{this.elements.headerWrapper.classList.add(V)}));else if("up"===t){if(this._clearStickyHeaderTimeout(),this.isFixed)return;requestAnimationFrame(()=>{this._headerSlideIn()})}},_clearStickyHeaderTimeout(){this.stickyHeaderTimeout&&clearTimeout(this.stickyHeaderTimeout)},_productAddedToCart(){if(this.scrolledPastHeader){if(!this.isFixed){if(this.isHeaderAnimating)return void setTimeout(()=>{this._headerSlideIn()},500);this._headerSlideIn()}clearTimeout(this.stickyHeaderTimeout),this.stickyHeaderTimeout=setTimeout(()=>{this._headerSlideOut()},5e3)}},_preventHeaderSlideIn(){this.doNotSlideHeaderIn=!0,this.isFixed&&this._headerSlideOut(),this.lastScrollDirection=null,this.preventHeaderSlideInTimeout=setTimeout(()=>{this.doNotSlideHeaderIn=!1,this.previousScrollPosition=window.pageYOffset})},_featuredCollectionSticky(e){const{stickyElement:t,isSticky:i,container:n}=e.detail,s=n.dataset.sectionId;this.featuredCollections[s]=this.featuredCollections[s]||{stickyElement:t,isSticky:i},this.featuredCollections[s].isSticky=i,this._toggleFeaturedCollectionStyle(this.featuredCollections[s])},_resetHeader(){this.elements.headerSentinel&&(this.isFixed=!1,this.isHeaderAnimating=!0,this._clearStickyHeaderTimeout(),this.elements.menuNavigation&&(this.elements.headerLogo?s(this.elements.headerLogo).then(()=>{this._handleMenuNavigationWidth()}):this._handleMenuNavigationWidth()),this._toggleBodyClass(),this.elements.announcementBar&&(this.elements.announcementBar.style.display="block"),this.elements.headerWrapper.classList.remove(j,V),this.featuredCollections&&(Object.keys(this.featuredCollections).forEach(e=>{const t=this.featuredCollections[e];t.stickyElement.style.transform="translateY(0)",t.stickyElement.style.removeProperty("transition")}),this.isHeaderAnimating=!1))},_headerSlideIn(){this.isFixed=!0,this.isHeaderAnimating=!0,this.drawerMenuIsActive=!0,this._toggleBodyClass(),this.elements.announcementBar&&(this.elements.announcementBar.style.display="none"),requestAnimationFrame(()=>{this.elements.headerWrapper.classList.add(j),this.elements.headerWrapper.classList.remove(V),this._checkForFeaturedCollection()}),s(this.elements.headerWrapper).then(()=>{this.elements.headerLogo&&(this.elements.headerLogo.style.transition="max-width 0.25s ease-out"),this.isHeaderAnimating=!1})},_headerSlideOut(){this.isFixed=!1,this.isHeaderAnimating=!0,this._toggleBodyClass(),this.elements.headerLogo&&this.elements.headerLogo.style.removeProperty("transition"),this.elements.headerWrapper.classList.add(V),s(this.elements.headerWrapper).then(()=>{this.elements.headerWrapper.classList.remove(j),this.isHeaderAnimating=!1}),this._checkForFeaturedCollection(),this._clearStickyHeaderTimeout()},_moveSentinel(){this.elements.headerSentinel.style.transform=`translateY(-${this.originalHeaderHeight}px)`},_resetSentinel(){this.elements.headerSentinel.style.removeProperty("transform")},_toggleBodyClass(){document.body.classList.toggle(G,this.isFixed)},_toggleInlineMenuOpacity(){this.elements.menuNavigation&&!this.drawerMenuIsActive&&this.elements.menuNavigation.classList.toggle(U,this.scrolledPastHeader)},_checkForFeaturedCollection(){this.featuredCollections&&Object.keys(this.featuredCollections).forEach(e=>{const t=this.featuredCollections[e];this._toggleFeaturedCollectionStyle(t)})},_toggleFeaturedCollectionStyle(e){this.isFixed&&e.isSticky?(e.stickyElement.style.transition="transform .25s ease-out",e.stickyElement.style.transform=`translateY(${this.elements.header.offsetHeight}px)`):(e.stickyElement.style.transform="translateY(0)",s(e.stickyElement).then(()=>{e.stickyElement.style.removeProperty("transition")}))},onUnload(){window.removeEventListener("scroll",this.eventHandlers.toggleHeaderSticky,{passive:!0}),document.removeEventListener("productAddedToCart",this.eventHandlers.productAddedToCart),document.removeEventListener("featuredCollectionTabClicked",this.eventHandlers.preventHeaderSlideIn),document.removeEventListener("elementSticky",this.eventHandlers.featuredCollectionSticky),this.headerObserver&&this.headerObserver.disconnect(),this.elements.menuNavigation&&(this.elements.dropdownParents.forEach(e=>e.removeEventListener("click",this.eventHandlers.onDropdownParentClick)),window.removeEventListener("resize",this.eventHandlers.onWindowResize),this.elements.mobileNavigationToggle.removeEventListener("click",this.eventHandlers.handleMobileNavigation))}});const ee={mediaArrowPrev:"[data-media-arrow-previous]",mediaArrowNext:"[data-media-arrow-next]",mediaCurrent:"[data-media-current]",mediaImages:"[data-media-image]",mediaLiveRegion:"[data-media-liveregion]",strip:"[data-media-strip]",mediaIndicatorLabel:"[data-media-indicator-label]",mediaWrapper:"[data-media-wrapper]",mediaStripWrapper:"[data-media-strip-wrapper]"},te={isActive:"is-active",transitionReady:"transition-ready"};class ie{constructor(e){this.elements={container:e},this.navigationOnClick=Boolean(this.elements.container.dataset.mediaClickNav)}init(){Object.assign(this.elements,this.getElements()),this.eventHandlers=this.setupEventHandlers(),this.bindEvents(),this.state=this.setInitialState(),this.setIndicatorLabel(),this.hideMedia(),this.applyTransformation(),window.setTimeout(()=>this.enableTransition()),this.preloadAdjacentImages()}getElements(){return{arrowNext:this.elements.container.querySelector(ee.mediaArrowNext),arrowPrev:this.elements.container.querySelector(ee.mediaArrowPrev),currentIndex:this.elements.container.querySelector(ee.mediaCurrent),images:Array.from(this.elements.container.querySelectorAll(ee.mediaImages)),liveRegionContent:this.elements.container.querySelector(ee.mediaLiveRegion),galleryIndicator:this.elements.container.querySelector(ee.mediaIndicatorLabel),mediaWrapper:this.elements.container.querySelectorAll(ee.mediaWrapper),mediaStripWrapper:this.elements.container.querySelector(ee.mediaStripWrapper)}}setupEventHandlers(){return{onArrowClick:this.onArrowClick.bind(this),onKeyUp:this.onKeyUp.bind(this),onImageClick:this.onImageClick.bind(this)}}bindEvents(){[this.elements.arrowNext,this.elements.arrowPrev].forEach(e=>{e.addEventListener("click",this.eventHandlers.onArrowClick)}),this.elements.container.addEventListener("keyup",this.eventHandlers.onKeyUp),this.navigationOnClick&&this.elements.images.forEach(e=>{e.addEventListener("click",this.eventHandlers.onImageClick)})}destroy(){[this.elements.arrowNext,this.elements.arrowPrev].forEach(e=>{e.removeEventListener("click",this.eventHandlers.onArrowClick)}),this.elements.container.removeEventListener("keyup",this.eventHandlers.onKeyUp),this.elements.images.forEach(e=>{e.removeEventListener("click",this.eventHandlers.onImageClick)})}setInitialState(){const e=this.elements.images.find(e=>e.classList.contains(te.isActive));return{activeMediaImage:e,mediaId:Number(e.dataset.mediaId),mediaIndex:Number(e.dataset.mediaIndex),activeMediaTotalImages:this.elements.images.length,useAriaHidden:!0}}onArrowClick(e){e.preventDefault(),this.state.isNext="mediaArrowNext"in e.currentTarget.dataset,this.goToAdjacentMedia()}onKeyUp(e){e.key.toLowerCase()!==i.LEFT&&e.key.toLowerCase()!==i.RIGHT||(e.preventDefault(),this.state.isNext=e.key.toLowerCase()===i.RIGHT,this.goToAdjacentMedia())}onImageClick(e){const t=e.currentTarget.dataset.mediaIndex,i=this.elements.images.find(e=>e.classList.contains(te.isActive)).dataset.mediaIndex;this.state.isNext=t>i,t!==i&&this.goToAdjacentMedia()}goToAdjacentMedia(){this.setMediaIndex(),this.setActiveMedia("mediaIndex"),this.state.mediaId=Number(this.state.activeMediaImage.dataset.mediaId),this.renderGallery()}variantMediaSwitch(e){e!==this.state.mediaId&&(this.state.mediaId=e,this.setActiveMedia("mediaId"),this.state.mediaIndex=Number(this.state.activeMediaImage.dataset.mediaIndex),this.renderGallery())}cacheElement(e){this.elements[e]=this.elements[e]||this.elements.container.querySelector(ee[e])}setActiveMedia(e){this.state.activeMediaImage=this.elements.images.find(t=>Number(t.dataset[e])===this.state[e])}setMediaIndex(){this.state.mediaIndex=this.state.isNext?this.nextImage():this.previousImage()}nextImage(){return this.state.mediaIndex===this.state.activeMediaTotalImages?1:this.state.mediaIndex+1}previousImage(){return 1===this.state.mediaIndex?this.state.activeMediaTotalImages:this.state.mediaIndex-1}preloadAdjacentImages(){this.elements.images.filter(e=>[this.nextImage(),this.previousImage()].includes(Number(e.dataset.mediaIndex))).forEach(e=>this.loadImage(e))}applyActiveClass(){this.state.activeMediaImage.classList.add(te.isActive),this.loadImage(this.state.activeMediaImage)}hideMedia(){this.state.useAriaHidden&&this.elements.images.forEach(e=>{const t=e.closest(ee.mediaWrapper),i=t.querySelectorAll("button, a");if(!e.classList.contains(te.isActive))return e.closest(ee.mediaWrapper).setAttribute("aria-hidden","true"),void i.forEach(e=>e.setAttribute("tabindex","-1"));t.removeAttribute("aria-hidden"),i.forEach(e=>e.removeAttribute("tabindex"))})}getIndicatorText(){return this.elements.liveRegionContent.dataset.mediaLiveregionMessage.replace("[index]",this.state.mediaIndex).replace("[indexTotal]",this.state.activeMediaTotalImages)}setIndicatorLabel(){const e=this.getIndicatorText();this.elements.galleryIndicator.setAttribute("aria-label",e)}updateLiveRegion(){const e=this.getIndicatorText();this.elements.liveRegionContent.setAttribute("aria-hidden",!1),this.elements.liveRegionContent.textContent=e,setTimeout(()=>{this.elements.liveRegionContent.setAttribute("aria-hidden",!0)},2e3)}loadImage(e){e.getAttribute("src")||"IMG"!==e.tagName||e.setAttribute("src",e.dataset.src),e.getAttribute("srcset")||"IMG"!==e.tagName||e.setAttribute("srcset",e.dataset.srcset)}clearActiveClasses(){this.elements.images.forEach(e=>e.classList.remove(te.isActive))}renderCurrentIndex(){this.elements.currentIndex.textContent=this.state.mediaIndex}enableTransition(){this.cacheElement("strip"),this.elements.strip.classList.add(te.transitionReady)}applyTransformation(){this.cacheElement("strip");const e=100*(this.state.mediaIndex-1);this.elements.strip.style.transform=`translateX(-${e}%)`}resetTransformation(){this.cacheElement("strip"),this.elements.strip.classList.remove(te.transitionReady),this.elements.strip.style.transform="translateX(0)"}addAccessibilityAttr(){this.elements.container.setAttribute("aria-roledescription",theme.strings.mediaCarousel),this.elements.container.setAttribute("aria-label",this.elements.container.dataset.label),this.elements.mediaStripWrapper.setAttribute("aria-live","polite"),this.elements.mediaWrapper.forEach(e=>{e.setAttribute("role","group"),e.setAttribute("aria-roledescription",theme.strings.mediaSlide),e.setAttribute("aria-label",e.dataset.mediaLabel)})}removeAccessibilityAttr(){this.elements.container.removeAttribute("aria-roledescription"),this.elements.container.removeAttribute("aria-label"),this.elements.mediaWrapper.forEach(e=>{e.removeAttribute("aria-roledescription"),e.removeAttribute("aria-label"),e.removeAttribute("role")}),this.elements.images.forEach(e=>{e.closest(ee.mediaWrapper).removeAttribute("aria-hidden")}),this.elements.mediaStripWrapper.removeAttribute("aria-live")}renderGallery(){this.clearActiveClasses(),this.applyActiveClass(),this.hideMedia(),this.applyTransformation(),this.renderCurrentIndex(),this.setIndicatorLabel(),this.updateLiveRegion(),this.preloadAdjacentImages()}}function ne(){this.entries=[]}function se(e,t){re(e);var i=function(e,t){re(e),function(e){if(!Array.isArray(e))throw new TypeError(e+" is not an array.");if(0===e.length)return[];if(!e[0].hasOwnProperty("name"))throw new Error(e[0]+"does not contain name key.");if("string"!=typeof e[0].name)throw new TypeError("Invalid value type passed for name of option "+e[0].name+". Value should be string.")}(t);var i=[];return t.forEach(function(t){for(var n=0;n<e.options.length;n++)if(e.options[n].name.toLowerCase()===t.name.toLowerCase()){i[n]=t.value;break}}),i}(e,t);return function(e,t){return re(e),function(e){if(Array.isArray(e)&&"object"==typeof e[0])throw new Error(e+"is not a valid array of options.")}(t),e.variants.filter(function(e){return t.every(function(t,i){return e.options[i]===t})})[0]||null}(e,i)}function re(e){if("object"!=typeof e)throw new TypeError(e+" is not an object.");if(0===Object.keys(e).length&&e.constructor===Object)throw new Error(e+" is empty.")}ne.prototype.add=function(e,t,i){this.entries.push({element:e,event:t,fn:i}),e.addEventListener(t,i)},ne.prototype.removeAll=function(){this.entries=this.entries.filter(function(e){return e.element.removeEventListener(e.event,e.fn),!1})};var ae={idInput:'[name="id"]',optionInput:'[name^="options"]',quantityInput:'[name="quantity"]',propertyInput:'[name^="properties"]'};function oe(e,t,i){this.element=e,this.product=function(e){if("object"!=typeof e)throw new TypeError(e+" is not an object.");if(void 0===e.variants[0].options)throw new TypeError("Product object is invalid. Make sure you use the product object that is output from {{ product | json }} or from the http://[your-product-url].js route");return e}(t),i=i||{},this._listeners=new ne,this._listeners.add(this.element,"submit",this._onSubmit.bind(this,i)),this.optionInputs=this._initInputs(ae.optionInput,i.onOptionChange),this.quantityInputs=this._initInputs(ae.quantityInput,i.onQuantityChange),this.propertyInputs=this._initInputs(ae.propertyInput,i.onPropertyChange)}oe.prototype.destroy=function(){this._listeners.removeAll()},oe.prototype.options=function(){return e=this.optionInputs,t=function(e){return e.name=/(?:^(options\[))(.*?)(?:\])/.exec(e.name)[2],e},e.reduce(function(e,i){return(i.checked||"radio"!==i.type&&"checkbox"!==i.type)&&e.push(t({name:i.name,value:i.value})),e},[]);var e,t},oe.prototype.variant=function(){return se(this.product,this.options())},oe.prototype.properties=function(){var e,t,i=(e=this.propertyInputs,t=function(e){return/(?:^(properties\[))(.*?)(?:\])/.exec(e)[2]},e.reduce(function(e,i){return(i.checked||"radio"!==i.type&&"checkbox"!==i.type)&&(e[t(i.name)]=i.value),e},{}));return 0===Object.entries(i).length?null:i},oe.prototype.quantity=function(){return this.quantityInputs[0]?Number.parseInt(this.quantityInputs[0].value,10):1},oe.prototype._setIdInputValue=function(e){var t=this.element.querySelector(ae.idInput);t||((t=document.createElement("input")).type="hidden",t.name="id",this.element.appendChild(t)),t.value=e.toString()},oe.prototype._onSubmit=function(e,t){t.dataset=this._getProductFormEventData(),t.dataset.variant&&this._setIdInputValue(t.dataset.variant.id),e.onFormSubmit&&e.onFormSubmit(t)},oe.prototype._onFormEvent=function(e){return void 0===e?Function.prototype:function(t){t.dataset=this._getProductFormEventData(),e(t)}.bind(this)},oe.prototype._initInputs=function(e,t){return Array.prototype.slice.call(this.element.querySelectorAll(e)).map(function(e){return this._listeners.add(e,"change",this._onFormEvent(t)),e}.bind(this))},oe.prototype._getProductFormEventData=function(){return{options:this.options(),variant:this.variant(),properties:this.properties(),quantity:this.quantity()}};const de={drawerContent:"[data-store-availability-drawer-content]",drawerOutput:"[data-store-availability-drawer-output]",errorTemplate:"[data-store-availability-error-template]",mainContent:"[data-store-availability-main-content]",drawerProductTitle:"[data-store-availability-drawer-product-title]",drawerVariantTitleWrapper:"[data-store-availability-drawer-variant-title-wrapper]",openDrawer:"[data-store-availability-open-drawer]",refreshList:"[data-store-availability-refresh-list]"},le={hidden:"hidden"};class ce{constructor(e,t){this.container=e,this.errorTemplate=e.querySelector(de.errorTemplate),this.productTitle=this.container.getAttribute("data-product-title"),this.hasOnlyDefaultVariant="true"===this.container.getAttribute("data-has-only-default-variant"),this.options={variant:null,variantLabels:[]},Object.assign(this.options,t),this._bindEvents()}hide(){this.container.innerHTML=""}updateVariant(e){Object.assign(this.options,e)}updateContent(e,t){const i=`${this.container.getAttribute("data-base-url")}/variants/${e}?section_id=store-availability`;this.variantOptions=t,fetch(i).then(e=>e.text()).then(e=>{this._render(e)}).catch(()=>{this._renderError()})}_bindEvents(){this.container.addEventListener("click",this._onClickContainer.bind(this))}_getStorePopup(){return window.popups.find(e=>"store-availability"===e.name)}_onClickContainer(e){const t=e.target.closest(de.refreshList),i=e.target.closest(de.openDrawer);t&&this.options.variant.available&&this.updateContent(this.options.id,this.options.options);const n=this._getStorePopup();i&&n&&n.openPopup({currentTarget:i})}_render(e){const t=(new DOMParser).parseFromString(e,"text/html"),i=t.documentElement.querySelector(de.mainContent);if(!i)return;const n=t.documentElement.querySelector(de.drawerContent),s=i.content.firstElementChild.cloneNode(!0);this.container.innerHTML="",this.container.appendChild(s),this._getStorePopup().elements.popup&&this._updateDrawer(n)}_renderError(){const e=this.errorTemplate.content.firstElementChild.cloneNode(!0);this.container.innerHTML="",this.container.appendChild(e)}_hideVariantTitle(){this.drawerVariantTitleWrapper.classList.add(le.hidden)}_updateDrawer(e){const t=document.createDocumentFragment(),i=this._getStorePopup().elements.popup;this.drawerOutput=i.querySelector(de.drawerOutput),this.drawerProductTitle=i.querySelector(de.drawerProductTitle),this.drawerVariantTitleWrapper=i.querySelector(de.drawerVariantTitleWrapper),this.hasOnlyDefaultVariant&&this._hideVariantTitle(),this.drawerProductTitle.textContent=this.productTitle,this.options.variantLabels.length>0&&this.variantOptions.forEach((e,i)=>{const n=t.appendChild(document.createElement("div")),s=n.appendChild(document.createElement("span"));s.textContent=this.options.variantLabels[i],s.className="store-availability-variant__label",n.appendChild(document.createElement("span")).textContent=e}),this.drawerVariantTitleWrapper.innerHTML="",this.drawerVariantTitleWrapper.appendChild(t),this.drawerOutput.innerHTML="",this.drawerOutput.appendChild(e)}}const ue={dataQuantitySelectorIncrease:"data-quantity-selector-increase"},he={addToCart:"[data-add-to-cart]",addToCartText:"[data-add-to-cart-text]",cartCountBubble:"[data-cart-count-bubble]",cartCount:"[data-cart-count]",cartPriceBubble:"[data-cart-price-bubble]",errorMessageWrapper:"[data-error-message-wrapper]",errorMessage:"[data-error-message]",price:"[data-price]",productForm:"[data-product-form]",productJSON:"[data-product-json]",productMasterSelect:"[data-product-master-select]",productPolicies:"[data-product-policies]",regularPrice:"[data-regular-price]",productSuccessMessage:"[data-product-success-message]",productStatus:"[data-product-status]",salePrice:"[data-sale-price]",unitPrice:"[data-unit-price]",unitPriceBaseUnit:"[data-unit-price-base-unit]",quantityInput:"[data-quantity-input]",quantityInputWrapper:"[data-quantity-input-wrapper]",quantitySelectors:"[data-quantity-selector]",quantitySelectorIncrease:"[data-quantity-selector-increase]",storeAvailability:"[data-store-availability]"},pe={hidden:"hidden",formInputError:"form__input-wrapper--error",productOnSale:"price--on-sale",productSoldOut:"price--sold-out",productUnitAvailable:"price--unit-available",productUnavailable:"price--unavailable",visuallyHidden:"visually-hidden"};class me{constructor(e){this.elements={container:e}}init(){if(this.eventHandlers={},Object.assign(this.elements,this._getElements()),this.elements.productForm)if(this.productId=this.elements.productForm.dataset.productId,this.elements.productJSON){const e=JSON.parse(this.elements.productJSON.innerHTML);if(this._initProductForm(e),this.elements.storeAvailability&&this.productForm){const t=this.productForm.variant(),i=e.options.map(e=>e.name);this.storeAvailability=new ce(this.elements.storeAvailability,{variant:t,variantLabels:i}),t&&this._updateStoreAvailability(t)}}else this._getProductJSON(this.elements.productForm.dataset.productHandle).then(e=>{this._initProductForm(e)}).catch(e=>{throw new Error(e)})}destroy(){Boolean(this.elements.container.dataset.showQuantitySelector)&&(this.elements.quantitySelectors.forEach(e=>{e.removeEventListener("click",this.eventHandlers.onQuantitySelectorClick)}),this.hasInstantQuantity&&(this.elements.quantityInput.removeEventListener("input",this.eventHandlers.onQuantityInputTextChanged),this.elements.quantityInput.removeEventListener("removedFromCart",this.eventHandlers.onProductRemovedFromCart)))}_hideInstantQuantity(){this.hasInstantQuantity&&this.elements.quantityInputWrapper&&(this.elements.quantityInput.value=1,this._hideErrorMessage(),this.elements.quantityInputWrapper.classList.add(pe.hidden),this.elements.addToCart.classList.remove(pe.hidden),this.elements.addToCart.focus())}_initProductForm(e){this.productForm=new oe(this.elements.productForm,e,{onOptionChange:this._onFormOptionChange.bind(this),onFormSubmit:this._onFormSubmit.bind(this),onQuantityChange:this._onQuantityChange.bind(this)}),this._setupEventListeners()}_getElements(){return{addToCart:this.elements.container.querySelector(he.addToCart),addToCartText:this.elements.container.querySelector(he.addToCart),cartPriceBubble:document.querySelector(he.cartPriceBubble),errorMessageWrapper:this.elements.container.querySelector(he.errorMessageWrapper),errorMessageElement:this.elements.container.querySelector(he.errorMessage),masterSelect:this.elements.container.querySelector(he.productMasterSelect),productForm:this.elements.container.querySelector(he.productForm),productJSON:this.elements.container.querySelector(he.productJSON),productPolicies:this.elements.container.querySelector(he.productPolicies),productStatus:this.elements.container.querySelector(he.productStatus),priceContainer:this.elements.container.querySelector(he.price),regularPrice:this.elements.container.querySelectorAll(he.regularPrice),salePrice:this.elements.container.querySelector(he.salePrice),successMessage:this.elements.container.querySelector(he.productSuccessMessage),quantityInputWrapper:this.elements.container.querySelector(he.quantityInputWrapper),quantityInput:this.elements.container.querySelector(he.quantityInput),quantitySelectors:this.elements.container.querySelectorAll(he.quantitySelectors),quantitySelectorIncrease:this.elements.container.querySelector(he.quantitySelectorIncrease),unitPrice:this.elements.container.querySelector(he.unitPrice),unitPriceBaseUnit:this.elements.container.querySelector(he.unitPriceBaseUnit),storeAvailability:this.elements.container.querySelector(he.storeAvailability)}}_getEventHandlers(){return{onProductRemovedFromCart:this._hideInstantQuantity.bind(this),onQuantitySelectorClick:this._onQuantitySelectorClick.bind(this),onQuantityInputTextChanged:n(()=>{this._updateCartQuantity()},1e3)}}_setupEventListeners(){this.elements.container.dataset.showQuantitySelector&&(this.eventHandlers=this._getEventHandlers(),this.hasInstantQuantity=Boolean(this.elements.quantityInputWrapper.dataset.quantityInputInstant),this.elements.quantitySelectors.forEach(e=>{e.addEventListener("click",this.eventHandlers.onQuantitySelectorClick)}),this.hasInstantQuantity&&(this.elements.quantityInput.addEventListener("input",this.eventHandlers.onQuantityInputTextChanged),this.elements.quantityInput.addEventListener("removedFromCart",this.eventHandlers.onProductRemovedFromCart)))}_getProductJSON(e){const t="/"===theme.rootUrl?"":theme.rootUrl;return window.fetch(`${t}/products/${e}.js`).then(e=>e.json())}_onFormSubmit(e){e.preventDefault(),this.elements.container.querySelector(he.addToCart).hasAttribute("aria-disabled")||this._quantityIsInvalid()||this._addItemToCart()}_quantityIsInvalid(){return!(!this.elements.quantityInput||!(parseInt(this.elements.quantityInput.value,10)<=0||""===this.elements.quantityInput.value))&&(this._showErrorMessage(theme.strings.quantityMinimumMessage),!0)}_showInstantQuantity(e){this.hasInstantQuantity&&this.elements.quantityInputWrapper&&(this.elements.quantityInput.dataset.quantityInputKey=e.key,this.elements.quantityInput.value=e.quantity,this.elements.addToCart.classList.add(pe.hidden),this.elements.quantityInputWrapper.classList.remove(pe.hidden),this.elements.quantityInput&&this.elements.quantityInput.focus())}_addItemToCart(){this._hideErrorMessage(),this._toggleSuccessMessage(!0),w(this.elements.productForm).then(e=>{this._toggleSuccessMessage(!1,this._getSuccessMessage()),this._showInstantQuantity(e),window.carts.length||this._onCartUpdated(),this.isUpdatingCart=!1,document.dispatchEvent(new CustomEvent("productAddedToCart")),window.carts.forEach(e=>{e.onCartUpdated(this.productId)}),theme.cartQuantity.updateQuantityInputElements(e.key,e.quantity);const t=this._getQuantityUpdatedText(e.quantity,!0);this._updateLiveRegion(t)}).catch(e=>{this._handleProductError(e),this.isUpdatingCart=!1})}_getSuccessMessage(){const e=this.elements.quantityInput?this.elements.quantityInput.value:1;return parseInt(e,10)>1?theme.strings.itemAddedToCartMulti:theme.strings.itemAddedToCartSingle}_toggleSuccessMessage(e,t=""){this.elements.successMessage&&(this.elements.successMessage.textContent=t,this.elements.successMessage.classList.toggle(pe.hidden,e))}_onCartUpdated(){v().then(e=>{this._updateCartPriceBubble(e.total_price),this._updateCartCountBubble(e.item_count),theme.cartQuantity.updateLocalCartState(e,this.productId)}).catch(e=>{throw new Error(e)})}_updateCartPriceBubble(e){this.elements.cartPriceBubble&&(this.elements.cartPriceBubble.innerText=this._formatMoney(e))}_updateCartCountBubble(e){this.cartCountBubbles=this.cartCountBubbles||document.querySelectorAll(he.cartCountBubble),this.cartCounts=this.cartCounts||document.querySelectorAll(he.cartCount),this.cartCounts.forEach(t=>t.innerText=e>99?"99+":e),this.cartCountBubbles.forEach(t=>t.classList.toggle(pe.hidden,0===e))}_handleProductError(e){e.json().then(e=>{const t=e.description?e.description:theme.strings.cartError;this._showErrorMessage(t)}).catch(e=>{throw e})}_getQuantityErrorMessage(e){return theme.strings.quantityError.replace("[quantity]",e.quantity).replace("[title]",e.title)}_showErrorMessage(e){this.elements.errorMessageElement&&this.elements.errorMessageWrapper&&(this.elements.errorMessageElement.innerHTML=e,this.elements.errorMessageWrapper.classList.remove(pe.hidden),this.elements.errorMessageWrapper.setAttribute("aria-hidden",!0),this.elements.errorMessageWrapper.removeAttribute("aria-hidden"),this.elements.quantityInputWrapper&&!this.hasInstantQuantity&&this.elements.quantityInputWrapper.classList.add(pe.formInputError))}_hideErrorMessage(){this.elements.errorMessageWrapper&&(this.elements.errorMessageWrapper.classList.add(pe.hidden),this.elements.quantityInputWrapper&&!this.hasInstantQuantity&&this.elements.quantityInputWrapper.classList.remove(pe.formInputError))}_onFormOptionChange(e){const t=e.dataset.variant;this._updateMasterSelect(t),this._hideErrorMessage(),this._toggleSuccessMessage(!0),this._updatePrice(t),this._updateProductPolicies(t),this._updateAddToCart(t),this._updateVariantName(t),this._hideInstantQuantity(),this._updateStoreAvailability(t);const i=this._getVariantUpdatedText(t);this._updateLiveRegion(i),this._fireEvent("formOptionChanged",{variant:t})}_fireEvent(e,t){this.elements.container.dispatchEvent(new window.CustomEvent(e,{detail:t}))}_updateVariantName(e){e&&e.name&&(this.elements.productForm.dataset.variantName=e.name)}_updateMasterSelect(e){e&&this.elements.masterSelect&&(this.elements.masterSelect.value=e.id)}_onQuantityChange(){this._hideErrorMessage(),this._toggleSuccessMessage(!0)}_calculateNewInputQuantity(e,t){const i=this.hasInstantQuantity?0:1,n=t?e+1:e-1;return Math.max(i,n)}_onQuantitySelectorClick(e){if(this.isUpdatingCart)return;this._hideErrorMessage();const t=e.currentTarget.hasAttribute(ue.dataQuantitySelectorIncrease),i=this.elements.container.querySelector(he.quantityInput),n=parseInt(i.value,10),s=this._calculateNewInputQuantity(n,t);i.value=s,this.hasInstantQuantity&&(clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.isUpdatingCart=!0,this._updateCartQuantity()},500))}_updateCartQuantity(){const e=this.elements.quantityInput.dataset.quantityInputKey;if(!e)return;const[t]=e.split(":"),i=parseInt(this.elements.quantityInput.value,10);b(e,{quantity:i}).then(n=>{this.isUpdatingCart=!1,window.carts.length||this._onCartUpdated(),window.carts.forEach(e=>{e.onCartUpdated(this.productId)}),theme.cartQuantity.updateQuantityInputElements(e,i);const s=this._getQuantityUpdatedText(i);this._updateLiveRegion(s),document.dispatchEvent(new CustomEvent("productAddedToCart"));const r=n.items.find(t=>t.key===e),a=n.items.reduce((e,i)=>i.id===Number(t)?e+i.quantity:e,0);i>a&&(this.elements.quantityInput.value=a,this.elements.quantityInput.focus(),this._showErrorMessage(this._getQuantityErrorMessage(r))),i||this._hideInstantQuantity()})}_updatePrice(e){if(this.elements.priceContainer){if(this.elements.priceContainer.classList.remove(pe.productUnavailable,pe.productOnSale,pe.productUnitAvailable,pe.productSoldOut),this.elements.priceContainer.removeAttribute("aria-hidden"),!e)return this.elements.priceContainer.classList.add(pe.productUnavailable),void this.elements.priceContainer.setAttribute("aria-hidden",!0);e.available||this.elements.priceContainer.classList.add(pe.productSoldOut),e.compare_at_price>e.price?this._renderOnSalePrice(e):this._renderRegularPrice(e),this._updateUnitPrice(e)}}_renderOnSalePrice(e){this.elements.regularPrice.forEach(t=>{t.innerHTML=this._formatMoney(e.compare_at_price)}),this.elements.salePrice&&(this.elements.salePrice.innerHTML=this._formatMoney(e.price),this.elements.priceContainer.classList.add(pe.productOnSale))}_renderRegularPrice(e){this.elements.regularPrice.forEach(t=>{t.innerHTML=this._formatMoney(e.price)})}_updateUnitPrice(e){e.unit_price&&this.elements.unitPrice&&this.elements.unitPriceBaseUnit&&(this.elements.unitPrice.innerHTML=this._formatMoney(e.unit_price,theme.moneyFormat),this.elements.unitPriceBaseUnit.innerText=this._getBaseUnit(e),this.elements.priceContainer.classList.add(pe.productUnitAvailable))}_getBaseUnit(e){return 1===e.unit_price_measurement.reference_value?e.unit_price_measurement.reference_unit:e.unit_price_measurement.reference_value+e.unit_price_measurement.reference_unit}_updateProductPolicies(e){this.elements.productPolicies&&(this.elements.productPolicies.classList.remove(pe.visuallyHidden),e||this.elements.productPolicies.classList.add(pe.visuallyHidden))}_updateAddToCart(e){this.elements.addToCart&&this.elements.addToCartText&&(e?e.available?(this.elements.addToCart.removeAttribute("aria-disabled"),this.elements.addToCart.setAttribute("aria-label",theme.strings.addToCart),this.elements.addToCartText.innerText=theme.strings.addToCart):(this.elements.addToCart.setAttribute("aria-disabled",!0),this.elements.addToCart.setAttribute("aria-label",theme.strings.soldOut),this.elements.addToCartText.innerText=theme.strings.soldOut):(this.elements.addToCart.setAttribute("aria-disabled",!0),this.elements.addToCart.setAttribute("aria-label",theme.strings.unavailable),this.elements.addToCartText.innerText=theme.strings.unavailable))}_updateLiveRegion(e){this.elements.productStatus&&(this.elements.productStatus.innerText=e,this.elements.productStatus.setAttribute("aria-hidden",!1),setTimeout(()=>{this.elements.productStatus.setAttribute("aria-hidden",!0)},1e3))}_formatMoney(e){return _(e,theme.moneyFormat)}_getQuantityUpdatedText(e,t){let i=theme.strings.productUpdatedOnCart.replace("[quantity]",e);return 0===e?i=theme.strings.productRemovedFromCart:1===e&&t&&(i=theme.strings.productAddedToCart),i.replace("[title]",this.elements.productForm.dataset.variantName)}_getVariantUpdatedText(e){if(!e)return theme.strings.unavailable;const t=e.compare_at_price>e.price,i=e.available?"":theme.strings.soldOut;let n="",s=this._formatMoney(e.price),r="",a="",o="",d="";return t&&(n=theme.strings.regularPrice,s=this._formatMoney(e.compare_at_price),r=theme.strings.salePrice,a=this._formatMoney(e.price)),e.unit_price&&(o=theme.strings.unitPrice,d=`${this._formatMoney(e.unit_price)} ${theme.strings.unitPriceSeparator} ${this._getBaseUnit(e)}`),`${i} ${n} ${s} ${r} ${a} ${o} ${d}`}_updateStoreAvailability(e){this.storeAvailability&&(e&&e.available?(this.storeAvailability.updateContent(e.id,e.options),this.storeAvailability.updateVariant(e)):this.storeAvailability.hide())}}const ge={productForm:"[data-product-form]",media:"[data-media]",singleMedia:"[data-media-image]"};class ye{constructor(e){this.container=e,this._prepareGallery(),this.container.querySelector(ge.productForm)&&(this._setupEventListeners(),this.productForm=new me(this.container),this.productForm.init())}destroy(){this.productForm&&this.productForm.destroy(),this.container.removeEventListener("formOptionChanged",this.eventHandlers.onFormOptionChange),Boolean(this.gallery)&&this.gallery.destroy()}_getEventHandlers(){return{onFormOptionChange:this._onFormOptionChange.bind(this)}}_setupEventListeners(){this.eventHandlers=this._getEventHandlers(),this.container.addEventListener("formOptionChanged",this.eventHandlers.onFormOptionChange)}_prepareGallery(){if(this.galleryElement=this.container.querySelector(ge.media),this.galleryElement)if("gallery"!==this.container.dataset.mediaType){if(this._addGalleryMediaQueryListener(),this.galleryMediaQueryListener.matches)return this._initializeGallery(),void this.gallery.addAccessibilityAttr();this._loadAllGalleryImages()}else this._initializeGallery()}_addGalleryMediaQueryListener(){this.galleryMediaQueryListener=window.matchMedia(o("large","max")),this.galleryMediaQueryListener.addListener(e=>{e.matches?this._switchToGalleryMode():this._switchToStackedMode()})}_switchToGalleryMode(){const e=this._initializeGallery();this.gallery.state.useAriaHidden=!0,this.gallery.hideMedia(),this.gallery.addAccessibilityAttr(),e||this.gallery.bindEvents()}_switchToStackedMode(){this._loadAllGalleryImages(),this.gallery.removeAccessibilityAttr(),this.gallery.resetTransformation(),this.gallery.state.useAriaHidden=!1,this.gallery.destroy()}_initializeGallery(){return this.gallery?(this.gallery.applyTransformation(),window.setTimeout(()=>this.gallery.enableTransition()),!1):(this.gallery=new ie(this.galleryElement),this.gallery.init(),!0)}_loadAllGalleryImages(){this.container.querySelectorAll(ge.singleMedia).forEach(e=>{e.getAttribute("src")||e.setAttribute("src",e.getAttribute("data-src")),e.getAttribute("srcset")||e.setAttribute("srcset",e.getAttribute("data-srcset")),e.outerHTML=e.outerHTML}),this.gallery&&(this.gallery.elements.images=Array.from(this.gallery.elements.container.querySelectorAll(ge.singleMedia)))}_onFormOptionChange(e){const t=e.detail.variant;if(t&&t.featured_media&&this.gallery&&(this.gallery.variantMediaSwitch(t.featured_media.id),this.galleryMediaQueryListener)){if(this.galleryMediaQueryListener.matches)return;this.gallery.resetTransformation()}}}e.register("product",{onLoad(){this.product=new ye(this.container)},onUnload(){this.product.destroy()}});const ve={productCollectionTitle:"[data-product-collection-title]",productImage:"[data-media-image]",productRecommendationsContainer:"[product-recommendations-container]",productTemplate:"[data-product-template]",productViewCartLink:"[data-product-view-cart-link]",productModal:"[data-product-modal]"},we={hidden:"hidden",isOpen:"is-open",productModalNoMedia:"product-modal--no-media"};class be{constructor(e,t,i){this.elements={productContainer:e,productModalContent:t},this.collectionTitle=i||""}init(){this.elements.productModal=document.querySelector(ve.productModal),this.elements.productModal&&(this.eventHandlers=this._getEventHandlers())}setupProductModal(e){this._getProductModalContent(e).then(e=>{this.elements.productModal.querySelector(ve.productCollectionTitle).textContent=this.collectionTitle,this._setupProductModalContent(e)}).catch(e=>{throw new Error(e)})}_getEventHandlers(){return{hideModalShowCart:this._hideModalShowCart.bind(this),hideProductModal:this._hideProductModal.bind(this)}}_setupEventHandlers(){this.elements.productContainer.addEventListener("popup_closed",this.eventHandlers.hideProductModal),this.elements.viewCart=this.elements.productModalContent.querySelector(ve.productViewCartLink),this.elements.viewCart&&this.elements.viewCart.addEventListener("click",this.eventHandlers.hideModalShowCart)}_updateSPRReviews(){window.SPR&&window.SPR.initDomEls&&window.SPR.loadProducts&&(window.SPR.initDomEls(),window.SPR.loadProducts())}_getProductModalContent(e){return fetch(e).then(e=>e.text()).then(e=>{return(new DOMParser).parseFromString(e,"text/html")}).then(e=>e).catch(e=>{throw new Error(e)})}_setupProductModalContent(e){this.elements.productModalContent.innerHTML="",this.elements.productModalContent.scrollTo(0,0);const t=e.querySelector(ve.productRecommendationsContainer),i=this._getProductSection(e);this.elements.productModal.classList.toggle(we.productModalNoMedia,!this._productHasMedia(e)),this.elements.productModalContent.appendChild(i),t&&this._getProductRecommendations(t).then(e=>{this.elements.productModalContent.appendChild(e),this.productRecommendations.resetSafariImages(),this.productPopup=this.productPopup||window.popups.find(e=>"product-modal"===e.name),this.productPopup.resetContainerFocus()}).catch(e=>{throw new Error(e)}),this.elements.productModalContent.querySelectorAll(ve.productImage).forEach(e=>e.outerHTML=e.outerHTML),this._showProductModal(i),this._updateSPRReviews(),this._setupEventHandlers()}_getProductSection(e){return e.querySelector(ve.productTemplate)}_getProductRecommendations(e){return this.productRecommendations=new Se(e),this.productRecommendations.init(),this.productRecommendations.setupAndGetHTML()}_productHasMedia(e){return e.querySelectorAll(ve.productImage).length}_showProductModal(e){this.product=new ye(e),this.productPopup=this.productPopup||window.popups.find(e=>"product-modal"===e.name),window.Shopify&&Shopify.PaymentButton&&Shopify.PaymentButton.init(),this.productPopup.elements.stage.classList.contains(we.isOpen)||this.productPopup.openPopup({currentTarget:this.elements.productContainer})}_hideModalShowCart(e){e.preventDefault(),this.cartPopup=this.cartPopup||window.popups.find(e=>"cart"===e.name),this.productPopup.closePopup(),this.cartPopup.openPopup({currentTarget:this.productPopup.elements.triggerNode}),this._hideProductModal(),this.elements.viewCart&&this.elements.viewCart.removeEventListener("click",this.eventHandlers.hideModalShowCart)}_hideProductModal(){this.elements.productModalContent.innerHTML="",this.elements.productModalContent.classList.remove(we.productModalContentNoMedia),this.product.destroy(),this.elements.productContainer.removeEventListener("popup_closed",this.eventHandlers.hideProductModal)}}const fe={productCardLink:"[data-product-card-link]",productForm:"[data-product-form]",productOption:"[data-product-option]",showOptionsButton:"[data-show-options-button]"},_e={hidden:"hidden",productCardFormExpanded:"product-card--form-expanded"};class Ce{constructor(e,t,i){this.elements={productCard:e,productModalContent:t},this.collectionTitle=i}init(){Object.assign(this.elements,this._getElements()),this._setupEventHandlers(),this.productModal=new be(this.elements.productCard,this.elements.productModalContent,this.collectionTitle),this.productModal.init(),this.elements.productForm&&(this.productForm=new me(this.elements.productCard),this.productForm.init())}_getElements(){return{productCardLinks:this.elements.productCard.querySelectorAll(fe.productCardLink),productForm:this.elements.productCard.querySelector(fe.productForm),showOptionsButton:this.elements.productCard.querySelector(fe.showOptionsButton)}}_getEventHandlers(){return{onProductLinkClick:this._onProductLinkClick.bind(this)}}_setupEventHandlers(){this.eventHandlers=this._getEventHandlers(),this.elements.showOptionsButton&&(this.elements.showOptionsButton.addEventListener("click",()=>{this._toggleShowOptions(!0)}),this.elements.productCard.addEventListener("mouseleave",e=>{e.relatedTarget&&this._toggleShowOptions(!1)}),this.elements.productCard.addEventListener("focusout",e=>{e.relatedTarget&&!this.elements.productCard.contains(e.relatedTarget)&&this._toggleShowOptions(!1)})),this.elements.productCardLinks&&this.elements.productModalContent&&this.elements.productCardLinks.forEach(e=>e.addEventListener("click",this.eventHandlers.onProductLinkClick))}_toggleShowOptions(e){if(this.elements.productCard.classList.toggle(_e.productCardFormExpanded,e),this.elements.showOptionsButton.classList.toggle(_e.hidden,e),!e)return;const t=this.elements.productForm.querySelector(fe.productOption);t&&t.focus()}_onProductLinkClick(e){e.preventDefault();const t=e.currentTarget.href||e.currentTarget.dataset.productCardLinkUrl;this.productModal.setupProductModal(t)}}const Ee={productCard:"[data-product-card]",productCardImage:"[data-product-card-image]",productModalContent:"[data-product-modal-content]",productRecommendations:"[data-product-recommendations]"};class Se{constructor(e,t=!1){this.elements={container:e},this.setupRecommendationsOnInit=t,this.recommendationsLoaded=!1,this.isProductModalEnabled=Boolean(this.elements.container.dataset.productModal),this.isQuickAddEnabled=Boolean(this.elements.container.dataset.quickAdd)}init(){Object.assign(this.elements,this._getElements()),this.setupRecommendationsOnInit&&this._setupProductRecommendations()}setupAndGetHTML(){return new Promise((e,t)=>{this._getProductRecommendationsHTML().then(i=>{if(this._showProductRecommendations(i,!1),this.recommendationsLoaded)e(this.elements.container);else{t("Product recommendations are not available")}}).catch(e=>{throw new Error(e)})})}resetSafariImages(){this.elements.container.querySelectorAll(Ee.productCardImage).forEach(e=>e.outerHTML=e.outerHTML)}_getProductRecommendationsHTML(){const e=this.elements.container.dataset.baseUrl,t=this.elements.container.dataset.productId;return fetch(`${e}?section_id=product-recommendations&product_id=${t}&limit=4`).then(e=>e.text()).then(e=>{return(new DOMParser).parseFromString(e,"text/html")}).catch(e=>{throw new Error(e)})}_showProductRecommendations(e,t=!0){const i=e.querySelector(Ee.productRecommendations);i&&(this.elements.container.appendChild(i),this._setupProductCards(),t&&this.resetSafariImages(),this.recommendationsLoaded=!0)}_getElements(){return{productModalContent:document.querySelector(Ee.productModalContent)}}_setupProductRecommendations(){this._getProductRecommendationsHTML().then(e=>{this._showProductRecommendations(e)})}_setupProductCards(){if(theme.cartQuantity.updateQuantityIndicatorElements(!1,this.elements.container),!this.isProductModalEnabled&&!this.isQuickAddEnabled)return;this.elements.container.querySelectorAll(Ee.productCard).forEach(e=>{new Ce(e,this.elements.productModalContent,"").init()})}}e.register("product-recommendations",{onLoad(){this.productRecommendations=new Se(this.container,!0),this.productRecommendations.init()}});const Le={stickyElement:"[data-sticky-element]",stickySentinelTop:"[data-sticky-sentinel-top]",stickySentinelBottom:"[data-sticky-sentinel-bottom]"},Te={stickyContainer:"sticky__container",stickySentinel:"sticky__sentinel",stickySentinelTop:"sticky__sentinel--top",stickySentinelBottom:"sticky__sentinel--bottom",stickyElement:"sticky__element"};class Ie{constructor(e){this.container=e}init(){a()&&(this.stickyElement=this.container.querySelector(Le.stickyElement),this.stickyElement&&(this.sticky=!1,this._addSentinels(),this._observeTopSentinel(),this._observeBottomSentinel()))}destroy(){this.topObserver&&this.topObserver.disconnect(),this.bottomObserver&&this.bottomObserver.disconnect()}isSticky(){return this.sticky}_fireEvent(){document.dispatchEvent(new window.CustomEvent("elementSticky",{detail:{stickyElement:this.stickyElement,isSticky:this.sticky,container:this.container}}))}_addSentinels(){const e=document.createElement("div");e.classList.add(Te.stickySentinel,Te.stickySentinelTop),e.dataset.stickySentinelTop="",this.container.classList.add(Te.stickyContainer),this.stickyElement.insertAdjacentElement("beforebegin",e);const t=document.createElement("div");t.classList.add(Te.stickySentinel,Te.stickySentinelBottom),t.dataset.stickySentinelBottom="",this.stickyElement.parentElement.appendChild(t)}_observeTopSentinel(){const e=this.container.querySelector(Le.stickySentinelTop);e&&(this.topObserver=new IntersectionObserver(e=>{e.forEach(e=>{const t=e.boundingClientRect,i=e.rootBounds,n=t.bottom<i.top,s=t.bottom>=i.top&&t.bottom<i.bottom;n&&(this.sticky=!0,this.stickyElement.classList.add(Te.stickyElement),this._fireEvent()),s&&(this.sticky=!1,this.stickyElement.classList.remove(Te.stickyElement),this._fireEvent())})}),this.topObserver.observe(e))}_observeBottomSentinel(){const e=this.container.querySelector(Le.stickySentinelBottom);if(!e)return;let t=0;this.bottomObserver=new IntersectionObserver(e=>{e.forEach(e=>{const i=e.boundingClientRect,n=e.rootBounds,s=e.intersectionRatio,r=t>e.boundingClientRect.y;t=e.boundingClientRect.y;const a=i.bottom>n.top&&1===s,o=i.top<n.top&&i.bottom<n.bottom;!r&&a&&(this.sticky=!0,this.stickyElement.classList.add(Te.stickyElement),this._fireEvent()),o&&(this.sticky=!1,this.stickyElement.classList.remove(Te.stickyElement),this._fireEvent())})}),this.bottomObserver.observe(e)}}const ke={viewMoreButton:"[data-view-more-button]",viewMoreItem:"[data-view-more-item]",viewMoreStatus:"[data-view-more-status]"},Me={hidden:"hidden"},Ae={success:"viewmore_loaded"};class Pe{constructor(e){this.container=e}init(){this.container&&(this.viewMoreButton=this.container.querySelector(ke.viewMoreButton),this.viewMoreButton&&(this.maxCount=parseInt(this.viewMoreButton.dataset.viewMoreMax,10),this.countPerPage=parseInt(this.viewMoreButton.dataset.viewMoreStep,10),this.currentCount=parseInt(this.viewMoreButton.dataset.viewMoreCurrent,10),this.isLoading=!1,this._setupEventHandlers()))}_getEventHandlers(){return{onClickViewMoreHandler:this._onClickViewMoreHandler.bind(this)}}_setupEventHandlers(){this.eventHandlers=this._getEventHandlers(),this.viewMoreButton.addEventListener("click",this.eventHandlers.onClickViewMoreHandler)}_onClickViewMoreHandler(){this._loadItems()}_getNextPage(){const e=Math.floor(this.currentCount/this.countPerPage)+1;return this.viewMoreButton.dataset.viewMoreNext.replace("[pagination]",e)}_fireEvent(e,t){this.container.dispatchEvent(new window.CustomEvent(e,{detail:t}))}_loadItems(){if(this.isLoading||this.currentCount>=this.maxCount)return;const e=this._getNextPage();this.isLoading=!0,fetch(e).then(e=>e.text()).then(e=>{return(new DOMParser).parseFromString(e,"text/html")}).then(e=>{const t=[...e.querySelectorAll(ke.viewMoreItem)];this.currentCount<this.countPerPage&&t.splice(0,this.currentCount),this.isLoading=!1,this.currentCount+=t.length,this._updateButton(),this._updateLiveRegion(),this._fireEvent(Ae.success,{items:t})}).then(()=>{this._updateSPRBadges()}).catch(e=>{throw this.isLoading=!1,new Error(e)})}_updateSPRBadges(){window.SPR&&window.SPR.initDomEls&&window.SPR.loadBadges&&(window.SPR.initDomEls(),window.SPR.loadBadges())}_updateButton(){this.viewMoreButton.dataset.viewMoreCurrent=this.currentCount,this.currentCount>=this.maxCount&&this.viewMoreButton.classList.add(Me.hidden)}_updateLiveRegion(){const e=this.container.querySelector(ke.viewMoreStatus),t=e.dataset.viewMoreStatusMessage.replace("[item_count]",this.currentCount).replace("[item_max]",this.maxCount);e.innerText=t,e.setAttribute("aria-hidden",!1),setTimeout(()=>{e.setAttribute("aria-hidden",!0)},1e3)}}const qe="[data-featured-collections-tab]",He="[data-featured-collections-tab-panel]",xe="[data-featured-collections-wrapper]",Ne="[data-product-card]",Oe="[data-product-card-link]",De="[data-product-modal-content]",Fe="[data-view-more-content]",Be="featured-collections__panel--active",Re="featured-collections__panel--visible",We="featured-collections-tab__item--active";e.register("featured-collections",{onLoad(){this.elements=this._getElements(),this.scroller=new O(this.container),this.scroller.init(),this.stickyNav=new Ie(this.container),this.stickyNav.init(),this.isProductModalEnabled=Boolean(this.container.dataset.productModal),this.isQuickAddEnabled=Boolean(this.container.dataset.quickAdd),this.hasSingleCollection=Boolean(this.container.dataset.singleCollection),this.isProductModalEnabled&&(this.elements.productModalContent=document.querySelector(De)),this._setupProductCards(),this._setupEventHandlers(),theme.cartQuantity&&theme.cartQuantity.updateQuantityIndicatorElements(!1,this.container)},onUnload(){this.elements.tabs&&(this.stickyNav.destroy(),this.scroller.destroy(),this.elements.tabs.forEach(e=>{e.removeEventListener("click",this.eventHandlers.onClickTabHandler),e.removeEventListener("keydown",this.eventHandlers.onKeyDownTabHandler)}))},onBlockSelect(e){if(this.hasSingleCollection)return;const t=this.container.querySelector(`[data-featured-collections-block-id="${e}"]`);if(!t)return;const i=t.dataset.featuredCollectionsTabNumber;this.showCollectionPanel(i)},_getElements(){return{tabs:this.container.querySelectorAll(qe),tabsPanel:this.container.querySelectorAll(He),tabsPanelWrapper:this.container.querySelector(xe)}},_getEventHandlers(){return{onClickTabHandler:this.onClickTabHandler.bind(this),onKeyDownTabHandler:this.onKeyDownTabHandler.bind(this),onKeyUpTabHandler:this.onKeyUpTabHandler.bind(this),onViewMoreLoaded:this.onViewMoreLoaded.bind(this)}},_setupEventHandlers(){this.eventHandlers=this._getEventHandlers(),this.elements.tabsPanel.forEach(e=>{if(!e.dataset.viewMore)return;new Pe(e).init(),e.addEventListener("viewmore_loaded",this.eventHandlers.onViewMoreLoaded)}),this.elements.tabs&&!this.hasSingleCollection&&this.elements.tabs.forEach(e=>{e.addEventListener("click",this.eventHandlers.onClickTabHandler),e.addEventListener("keydown",this.eventHandlers.onKeyDownTabHandler),e.addEventListener("keyup",this.eventHandlers.onKeyUpTabHandler)})},_setupProductCards(){(this.isProductModalEnabled||this.isQuickAddEnabled)&&this.elements.tabsPanel.forEach(e=>{const t=e.querySelectorAll(Ne),i=e.dataset.collectionTitle;t.forEach(e=>{new Ce(e,this.elements.productModalContent,i).init()})})},onViewMoreLoaded(e){const t=e.detail.items,i=e.target,n=i.dataset.collectionTitle,s=i.querySelector(Fe),r=[];t.forEach((e,t)=>{const i=e.querySelector(Ne);r.push(i.dataset.productId);const a=s.appendChild(e).querySelector(Oe);a&&0===t&&a.focus(),(this.isProductModalEnabled||this.isQuickAddEnabled)&&new Ce(i,this.elements.productModalContent,n).init()}),theme.cartQuantity.updateQuantityIndicatorElements(r,this.viewMoreContent,!0)},onKeyDownTabHandler(e){[i.HOME,i.END,i.RIGHT,i.LEFT].includes(e.key.toLowerCase())&&e.preventDefault()},onKeyUpTabHandler(e){const t=e.currentTarget,n=this.elements.tabs.length-1,s=Number(t.dataset.featuredCollectionsTabNumber);let r=-1;switch(e.key.toLowerCase()){case i.HOME:r=0;break;case i.END:r=n;break;case i.RIGHT:r=s===n?0:s+1;break;case i.LEFT:r=0===s?n:s-1}-1!==r&&s!==r&&(e.preventDefault(),this.showCollectionPanel(r))},onClickTabHandler(e){const t=e.currentTarget.dataset.featuredCollectionsTabNumber;this.showCollectionPanel(t)},showCollectionPanel(e){const t=this.elements.tabs[e],i=this.elements.tabsPanelWrapper.getBoundingClientRect().top+window.pageYOffset-105;this.stickyNav.isSticky()&&(document.dispatchEvent(new CustomEvent("featuredCollectionTabClicked")),window.scrollTo({top:i})),this.elements.tabs.forEach(e=>{e.classList.remove(We),e.setAttribute("aria-selected",!1),e.setAttribute("tabindex",-1),delete e.dataset.featuredCollectionsSelectedTab,e.blur()}),t.classList.add(We),t.setAttribute("aria-selected",!0),t.setAttribute("tabindex",0),t.dataset.featuredCollectionsSelectedTab=!0,t.focus(),this.scroller.makeElementVisible(t);const n=this.elements.tabsPanel[e];n&&(this.elements.tabsPanel.forEach(e=>{e.classList.remove(Re),e.classList.remove(Be)}),n.classList.add(Be),window.requestAnimationFrame(()=>n.classList.add(Re)))}});const Qe="[data-product-card]",$e="[data-product-modal-content]",Ue="[data-slide]";e.register("custom-content",{onLoad(){this.elements=this._getElements();const e=this.container.querySelectorAll(Qe);this.container.dataset.slider&&this._prepareGallery(),this.isProductModalEnabled=Boolean(this.container.dataset.productModal),this.isProductModalEnabled&&e.length>0&&this._setupProductCards()},onUnload(){Boolean(this.gallery)&&this.gallery.destroy()},_getElements:()=>({productModalContent:document.querySelector($e)}),_setupProductCards(){this.container.querySelectorAll(Qe).forEach(e=>{new Ce(e,this.elements.productModalContent).init()})},_prepareGallery(){this.galleryElement=this.container.querySelector(Ue),this.galleryElement&&(this._addGalleryMediaQueryListener(),this.galleryMediaQueryListener.matches&&(this._initializeGallery(),this.gallery.addAccessibilityAttr()))},_disableGalleryMode(){this.gallery.removeAccessibilityAttr(),this.gallery.resetTransformation(),this.gallery.state.useAriaHidden=!1,this.gallery.destroy()},_switchToGalleryMode(){const e=this._initializeGallery();this.gallery.state.useAriaHidden=!0,this.gallery.hideMedia(),this.gallery.addAccessibilityAttr(),e||this.gallery.bindEvents()},_addGalleryMediaQueryListener(){this.galleryMediaQueryListener=window.matchMedia(o("medium","max")),this.galleryMediaQueryListener.addListener(e=>{e.matches?this._switchToGalleryMode():this._disableGalleryMode()})},_initializeGallery(){return this.gallery?(this.gallery.applyTransformation(),window.setTimeout(()=>this.gallery.enableTransition()),!1):(this.gallery=new ie(this.galleryElement),this.gallery.init(),!0)}});const je="[data-blog-tag-filter]";(()=>{const e=document.querySelector(je);e&&(!function(e){const t=document.createElement("span");t.innerHTML=e.selectedOptions[0].label,document.querySelector(".footer").appendChild(t);const i=t.offsetWidth;t.remove(),e.style.width=`${i+50}px`}(e),e.addEventListener("change",e=>{location.href=e.target.value}))})();const Ve={passwordButton:"[data-password-button]",passwordInput:"[data-password-input]"},Ge="data-error",Ke="data-template-password";(()=>{document.body.hasAttribute(Ke)&&document.querySelector(Ve.passwordInput).hasAttribute(Ge)&&window.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{window.popups.find(e=>"password-modal"===e.name).openPopup({currentTarget:document.querySelector(Ve.passwordButton)})},50)})})();const ze={addNewAddressToggle:"[data-add-new-address-toggle]",addressCountrySelect:"[data-address-country-select]",addressFormNew:"[data-address-form-new]",cancelEditAddressToggle:"[data-cancel-edit-address-toggle]",cancelNewAddressToggle:"[data-cancel-new-address-toggle]",customerAddresses:"[data-customer-addresses]",deleteAddressButton:"[data-delete-address-button]",editAddressToggle:"[data-edit-address-toggle]",editAddressId:e=>`[data-edit-address-id="${e}"]`,form:"[data-form]"},Je={addNewAddressToggle:"data-add-new-address-toggle"},Ye={hidden:"hidden"};(()=>{const e=document.querySelector(ze.customerAddresses);if(!e)return;const t=e.querySelector(ze.addressFormNew);function i(e,t,i){const n=e.currentTarget;"false"===t.getAttribute("aria-expanded")?(i.classList.remove(Ye.hidden),t.setAttribute("aria-expanded",!0)):(i.classList.add(Ye.hidden),t.setAttribute("aria-expanded",!1)),n.hasAttribute(Je.addNewAddressToggle)||t.focus()}function n(t,i){const n=t.currentTarget,s=n.dataset.addressId,r=e.querySelector(ze.editAddressId(s)),a=Array.from(i).find(e=>e.dataset.addressId===s);"false"===a.getAttribute("aria-expanded")?(r.classList.remove(Ye.hidden),a.setAttribute("aria-expanded",!0)):(r.classList.add(Ye.hidden),a.setAttribute("aria-expanded",!1)),n.hasAttribute(Je.editAddressFormToggle)||a.focus()}function s(e){const t=e.currentTarget,i=t.dataset.target,n=t.dataset.confirmMessage||"Are you sure you wish to delete this address?";confirm(n)&&Shopify.postLink(i,{parameters:{_method:"delete"}})}t&&(function(){Shopify&&new Shopify.CountryProvinceSelector("AddressCountryNew","AddressProvinceNew",{hideElement:"AddressProvinceContainerNew"});e.querySelectorAll(ze.addressCountrySelect).forEach(e=>{const t=e.dataset.formId,i=`AddressCountry_${t}`,n=`AddressProvince_${t}`,s=`AddressProvinceContainer_${t}`;new Shopify.CountryProvinceSelector(i,n,{hideElement:s})})}(),function(){const r=e.querySelector(ze.addNewAddressToggle),a=e.querySelector(ze.cancelNewAddressToggle),o=e.querySelectorAll(ze.editAddressToggle),d=e.querySelectorAll(ze.cancelEditAddressToggle),l=e.querySelectorAll(ze.deleteAddressButton);r.addEventListener("click",e=>i(e,r,t)),a.addEventListener("click",e=>i(e,r,t)),o.forEach(e=>e.addEventListener("click",e=>n(e,o))),d.forEach(e=>e.addEventListener("click",()=>{n(event,o)})),l.forEach(e=>e.addEventListener("click",s))}())})();const Xe={cancelResetPasswordLink:"[data-cancel-reset-password-link]",customerLogin:"[data-customer-login]",loginContainer:"[data-login-container]",loginHeading:"[data-login-heading]",resetPasswordHeading:"[data-reset-password-heading]",resetPasswordLink:"[data-reset-password-link]",resetPasswordContainer:"[data-reset-password-container]",resetPasswordSuccess:"[data-reset-password-success]",resetPasswordSuccessMessage:"[data-reset-password-success-message]"},Ze={hidden:"hidden"};(()=>{const e=document.querySelector(Xe.customerLogin);function t(t,i){const n=e.querySelector(Xe.loginContainer),s=e.querySelector(Xe.resetPasswordContainer);i?(n.classList.add(Ze.hidden),s.classList.remove(Ze.hidden)):(n.classList.remove(Ze.hidden),s.classList.add(Ze.hidden)),t.setAttribute("tabindex","-1"),t.focus(),t.addEventListener("blur",()=>{t.removeAttribute("tabindex")})}e&&(function(){if("#recover"===window.location.hash){const i=e.querySelector(Xe.resetPasswordHeading);t(i,!0)}}(),function(){const t=e.querySelector(Xe.resetPasswordSuccess),i=e.querySelector(Xe.resetPasswordSuccessMessage);if(!t)return;i.classList.remove(Ze.hidden),i.focus()}(),function(){const i=e.querySelector(Xe.resetPasswordLink),n=e.querySelector(Xe.cancelResetPasswordLink);i.addEventListener("click",i=>{i.preventDefault();const n=e.querySelector(Xe.resetPasswordHeading);t(n,!0)}),n.addEventListener("click",i=>{i.preventDefault();const n=e.querySelector(Xe.loginHeading);t(n,!1)})}())})(),window.addEventListener("DOMContentLoaded",()=>{new A,e.load("*"),window.carts=Array.from(document.querySelectorAll("[data-cart]"),e=>{const t=new S(e);return t.init(),t}),window.popups=Array.from(document.querySelectorAll("[data-popup]"),e=>{const t=new c(e.dataset.popup);return t.init(),t}),t.accessibleLinks("a[href]:not([aria-describedby]",{messages:{newWindow:theme.strings.newWindow,external:theme.strings.external,newWindowExternal:theme.strings.newWindowExternal}}),theme.cartQuantity=new I,theme.cartQuantity.updateLocalCartState();const i=document.querySelector("[data-cart-template]");if(i){new q(i).init()}})}(Shopify.theme.sections,Shopify.theme.a11y);